//go:build !noasm && amd64
// Code generated by GoAT. DO NOT EDIT.
// versions:
// 	clang   21.1.8
// 	objdump 2.45.1
// flags: -mavx512bf16 -mavx512f -mavx512vl -mavx512dq -O3
// source: ../c/ops_bf16_avx512_amd64.c

TEXT ·demote_f32_to_bf16_avx512(SB), $0-24
	MOVQ a+0(FP), DI
	MOVQ result+8(FP), SI
	MOVQ len+16(FP), DX
	WORD $0x8b48; BYTE $0x02 // movq	(%rdx), %rax
	LONG $0x40f88348         // cmpq	$64, %rax
	JL   BB0_1
	WORD $0xd231             // xorl	%edx, %edx

BB0_12:
	LONG $0x487ef262; WORD $0x0472; BYTE $0x97 // vcvtneps2bf16	(%rdi,%rdx,4), %ymm0
	QUAD $0x01974c72487ef262                   // vcvtneps2bf16	64(%rdi,%rdx,4), %ymm1
	QUAD $0x02975472487ef262                   // vcvtneps2bf16	128(%rdi,%rdx,4), %ymm2
	QUAD $0x03975c72487ef262                   // vcvtneps2bf16	192(%rdi,%rdx,4), %ymm3
	LONG $0x0411fcc5; BYTE $0x56               // vmovups	%ymm0, (%rsi,%rdx,2)
	LONG $0x4c11fcc5; WORD $0x2056             // vmovups	%ymm1, 32(%rsi,%rdx,2)
	LONG $0x5411fcc5; WORD $0x4056             // vmovups	%ymm2, 64(%rsi,%rdx,2)
	LONG $0x5c11fcc5; WORD $0x6056             // vmovups	%ymm3, 96(%rsi,%rdx,2)
	LONG $0x404a8d48                           // leaq	64(%rdx), %rcx
	LONG $0x7fc28348                           // addq	$127, %rdx
	WORD $0x3948; BYTE $0xc2                   // cmpq	%rax, %rdx
	WORD $0x8948; BYTE $0xca                   // movq	%rcx, %rdx
	JL   BB0_12
	WORD $0x8948; BYTE $0xca                   // movq	%rcx, %rdx
	LONG $0x1fca8348                           // orq	$31, %rdx
	WORD $0x3948; BYTE $0xc2                   // cmpq	%rax, %rdx
	JL   BB0_13
	JMP  BB0_3

BB0_1:
	WORD $0xc931             // xorl	%ecx, %ecx
	WORD $0x8948; BYTE $0xca // movq	%rcx, %rdx
	LONG $0x1fca8348         // orq	$31, %rdx
	WORD $0x3948; BYTE $0xc2 // cmpq	%rax, %rdx
	JGE  BB0_3

BB0_13:
	LONG $0x487ef262; WORD $0x0472; BYTE $0x8f // vcvtneps2bf16	(%rdi,%rcx,4), %ymm0
	QUAD $0x018f4c72487ef262                   // vcvtneps2bf16	64(%rdi,%rcx,4), %ymm1
	LONG $0x0411fcc5; BYTE $0x4e               // vmovups	%ymm0, (%rsi,%rcx,2)
	LONG $0x4c11fcc5; WORD $0x204e             // vmovups	%ymm1, 32(%rsi,%rcx,2)
	LONG $0x20518d48                           // leaq	32(%rcx), %rdx
	LONG $0x3fc18348                           // addq	$63, %rcx
	WORD $0x3948; BYTE $0xc1                   // cmpq	%rax, %rcx
	WORD $0x8948; BYTE $0xd1                   // movq	%rdx, %rcx
	JL   BB0_13
	WORD $0x8948; BYTE $0xd1                   // movq	%rdx, %rcx
	LONG $0x0fc98348                           // orq	$15, %rcx
	WORD $0x3948; BYTE $0xc1                   // cmpq	%rax, %rcx
	JL   BB0_14
	JMP  BB0_5

BB0_3:
	WORD $0x8948; BYTE $0xca // movq	%rcx, %rdx
	WORD $0x8948; BYTE $0xd1 // movq	%rdx, %rcx
	LONG $0x0fc98348         // orq	$15, %rcx
	WORD $0x3948; BYTE $0xc1 // cmpq	%rax, %rcx
	JGE  BB0_5

BB0_14:
	LONG $0x487ef262; WORD $0x0472; BYTE $0x97 // vcvtneps2bf16	(%rdi,%rdx,4), %ymm0
	LONG $0x0411fcc5; BYTE $0x56               // vmovups	%ymm0, (%rsi,%rdx,2)
	LONG $0x104a8d48                           // leaq	16(%rdx), %rcx
	LONG $0x1fc28348                           // addq	$31, %rdx
	WORD $0x3948; BYTE $0xc2                   // cmpq	%rax, %rdx
	WORD $0x8948; BYTE $0xca                   // movq	%rcx, %rdx
	JL   BB0_14
	WORD $0x8948; BYTE $0xca                   // movq	%rcx, %rdx
	LONG $0x07ca8348                           // orq	$7, %rdx
	WORD $0x3948; BYTE $0xc2                   // cmpq	%rax, %rdx
	JL   BB0_27
	JMP  BB0_7

BB0_5:
	WORD $0x8948; BYTE $0xd1 // movq	%rdx, %rcx
	WORD $0x8948; BYTE $0xca // movq	%rcx, %rdx
	LONG $0x07ca8348         // orq	$7, %rdx
	WORD $0x3948; BYTE $0xc2 // cmpq	%rax, %rdx
	JGE  BB0_7

BB0_27:
	LONG $0x287ef262; WORD $0x0472; BYTE $0x8f // vcvtneps2bf16y	(%rdi,%rcx,4), %xmm0
	LONG $0x0411f8c5; BYTE $0x4e               // vmovups	%xmm0, (%rsi,%rcx,2)
	LONG $0x08518d48                           // leaq	8(%rcx), %rdx
	LONG $0x0fc18348                           // addq	$15, %rcx
	WORD $0x3948; BYTE $0xc1                   // cmpq	%rax, %rcx
	WORD $0x8948; BYTE $0xd1                   // movq	%rdx, %rcx
	JL   BB0_27
	WORD $0x8948; BYTE $0xc1                   // movq	%rax, %rcx
	WORD $0x2948; BYTE $0xd1                   // subq	%rdx, %rcx
	JG   BB0_9
	JMP  BB0_30

BB0_7:
	WORD $0x8948; BYTE $0xca // movq	%rcx, %rdx
	WORD $0x8948; BYTE $0xc1 // movq	%rax, %rcx
	WORD $0x2948; BYTE $0xd1 // subq	%rdx, %rcx
	JLE  BB0_30

BB0_9:
	LONG $0x07f98348         // cmpq	$7, %rcx
	JA   BB0_15
	WORD $0x8949; BYTE $0xd1 // movq	%rdx, %r9
	JMP  BB0_20

BB0_15:
	LONG $0x40f98348         // cmpq	$64, %rcx
	JAE  BB0_22
	WORD $0x3145; BYTE $0xc0 // xorl	%r8d, %r8d
	JMP  BB0_17

BB0_22:
	WORD $0x8949; BYTE $0xc8               // movq	%rcx, %r8
	LONG $0xc0e08349                       // andq	$-64, %r8
	LONG $0x560c8d4c                       // leaq	(%rsi,%rdx,2), %r9
	LONG $0x60c18349                       // addq	$96, %r9
	QUAD $0x000000c097948d4c               // leaq	192(%rdi,%rdx,4), %r10
	QUAD $0x15670558487df262; WORD $0x0000 // vpbroadcastd	LCPI0_0(%rip), %zmm0    ## zmm0 = [2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647]
	QUAD $0x15610d58487df262; WORD $0x0000 // vpbroadcastd	LCPI0_1(%rip), %zmm1    ## zmm1 = [2139095040,2139095040,2139095040,2139095040,2139095040,2139095040,2139095040,2139095040,2139095040,2139095040,2139095040,2139095040,2139095040,2139095040,2139095040,2139095040]
	QUAD $0x155b1558487df262; WORD $0x0000 // vpbroadcastd	LCPI0_2(%rip), %zmm2    ## zmm2 = [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
	WORD $0x3145; BYTE $0xdb               // xorl	%r11d, %r11d
	QUAD $0x15521d58487df262; WORD $0x0000 // vpbroadcastd	LCPI0_3(%rip), %zmm3    ## zmm3 = [32767,32767,32767,32767,32767,32767,32767,32767,32767,32767,32767,32767,32767,32767,32767,32767]
	QUAD $0x00001592256ffdc5               // vmovdqa	LCPI0_4(%rip), %ymm4            ## ymm4 = [64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64]

BB0_23:
	QUAD $0xfd9a6c6f48fe9162                   // vmovdqu64	-192(%r10,%r11,4), %zmm5
	QUAD $0xfe9a746f48fe9162                   // vmovdqu64	-128(%r10,%r11,4), %zmm6
	QUAD $0xff9a7c6f48fe9162                   // vmovdqu64	-64(%r10,%r11,4), %zmm7
	LONG $0x48fe1162; WORD $0x046f; BYTE $0x9a // vmovdqu64	(%r10,%r11,4), %zmm8
	LONG $0x48557162; WORD $0xc8db             // vpandd	%zmm0, %zmm5, %zmm9
	LONG $0x484d7162; WORD $0xd0db             // vpandd	%zmm0, %zmm6, %zmm10
	LONG $0x48457162; WORD $0xd8db             // vpandd	%zmm0, %zmm7, %zmm11
	LONG $0x483d7162; WORD $0xe0db             // vpandd	%zmm0, %zmm8, %zmm12
	LONG $0x4835f162; WORD $0xe166             // vpcmpgtd	%zmm1, %zmm9, %k4
	LONG $0x482df162; WORD $0xd966             // vpcmpgtd	%zmm1, %zmm10, %k3
	LONG $0x4825f162; WORD $0xd166             // vpcmpgtd	%zmm1, %zmm11, %k2
	LONG $0x481df162; WORD $0xc966             // vpcmpgtd	%zmm1, %zmm12, %k1
	LONG $0x4835f162; WORD $0xd572; BYTE $0x10 // vpsrld	$16, %zmm5, %zmm9
	LONG $0x482df162; WORD $0xd672; BYTE $0x10 // vpsrld	$16, %zmm6, %zmm10
	LONG $0x4825f162; WORD $0xd772; BYTE $0x10 // vpsrld	$16, %zmm7, %zmm11
	LONG $0x481dd162; WORD $0xd072; BYTE $0x10 // vpsrld	$16, %zmm8, %zmm12
	LONG $0x48357162; WORD $0xeadb             // vpandd	%zmm2, %zmm9, %zmm13
	LONG $0x482d7162; WORD $0xf2db             // vpandd	%zmm2, %zmm10, %zmm14
	LONG $0x48257162; WORD $0xfadb             // vpandd	%zmm2, %zmm11, %zmm15
	LONG $0x481de162; WORD $0xc2db             // vpandd	%zmm2, %zmm12, %zmm16
	LONG $0x4855f162; WORD $0xebfe             // vpaddd	%zmm3, %zmm5, %zmm5
	LONG $0x4855d162; WORD $0xedfe             // vpaddd	%zmm13, %zmm5, %zmm5
	LONG $0x484df162; WORD $0xf3fe             // vpaddd	%zmm3, %zmm6, %zmm6
	LONG $0x484dd162; WORD $0xf6fe             // vpaddd	%zmm14, %zmm6, %zmm6
	LONG $0x4845f162; WORD $0xfbfe             // vpaddd	%zmm3, %zmm7, %zmm7
	LONG $0x4845d162; WORD $0xfffe             // vpaddd	%zmm15, %zmm7, %zmm7
	LONG $0x483d7162; WORD $0xc3fe             // vpaddd	%zmm3, %zmm8, %zmm8
	LONG $0x483d3162; WORD $0xc0fe             // vpaddd	%zmm16, %zmm8, %zmm8
	LONG $0x4855f162; WORD $0xd572; BYTE $0x10 // vpsrld	$16, %zmm5, %zmm5
	LONG $0x484df162; WORD $0xd672; BYTE $0x10 // vpsrld	$16, %zmm6, %zmm6
	LONG $0x4845f162; WORD $0xd772; BYTE $0x10 // vpsrld	$16, %zmm7, %zmm7
	LONG $0x483dd162; WORD $0xd072; BYTE $0x10 // vpsrld	$16, %zmm8, %zmm8
	LONG $0x487ef262; WORD $0xed33             // vpmovdw	%zmm5, %ymm5
	LONG $0x487ef262; WORD $0xf633             // vpmovdw	%zmm6, %ymm6
	LONG $0x487ef262; WORD $0xff33             // vpmovdw	%zmm7, %ymm7
	LONG $0x487e5262; WORD $0xc033             // vpmovdw	%zmm8, %ymm8
	LONG $0x487e5262; WORD $0xc933             // vpmovdw	%zmm9, %ymm9
	LONG $0x487e5262; WORD $0xd233             // vpmovdw	%zmm10, %ymm10
	LONG $0x487e5262; WORD $0xdb33             // vpmovdw	%zmm11, %ymm11
	LONG $0x487e5262; WORD $0xe433             // vpmovdw	%zmm12, %ymm12
	LONG $0xcceb35c5                           // vpor	%ymm4, %ymm9, %ymm9
	LONG $0xd4eb2dc5                           // vpor	%ymm4, %ymm10, %ymm10
	LONG $0xdceb25c5                           // vpor	%ymm4, %ymm11, %ymm11
	LONG $0xe4eb1dc5                           // vpor	%ymm4, %ymm12, %ymm12
	LONG $0x2cffd162; WORD $0xe96f             // vmovdqu16	%ymm9, %ymm5 {%k4}
	LONG $0x2bffd162; WORD $0xf26f             // vmovdqu16	%ymm10, %ymm6 {%k3}
	LONG $0x2affd162; WORD $0xfb6f             // vmovdqu16	%ymm11, %ymm7 {%k2}
	LONG $0x29ff5162; WORD $0xc46f             // vmovdqu16	%ymm12, %ymm8 {%k1}
	LONG $0x7f7e81c4; WORD $0x596c; BYTE $0xa0 // vmovdqu	%ymm5, -96(%r9,%r11,2)
	LONG $0x7f7e81c4; WORD $0x5974; BYTE $0xc0 // vmovdqu	%ymm6, -64(%r9,%r11,2)
	LONG $0x7f7e81c4; WORD $0x597c; BYTE $0xe0 // vmovdqu	%ymm7, -32(%r9,%r11,2)
	LONG $0x7f7e01c4; WORD $0x5904             // vmovdqu	%ymm8, (%r9,%r11,2)
	LONG $0x40c38349                           // addq	$64, %r11
	WORD $0x394d; BYTE $0xd8                   // cmpq	%r11, %r8
	JNE  BB0_23
	WORD $0x394c; BYTE $0xc1                   // cmpq	%r8, %rcx
	JE   BB0_30
	WORD $0xc1f6; BYTE $0x38                   // testb	$56, %cl
	JE   BB0_26

BB0_17:
	WORD $0x8949; BYTE $0xca             // movq	%rcx, %r10
	LONG $0xf8e28349                     // andq	$-8, %r10
	LONG $0x120c8d4e                     // leaq	(%rdx,%r10), %r9
	LONG $0x561c8d4c                     // leaq	(%rsi,%rdx,2), %r11
	QUAD $0x0013c305587de2c4; BYTE $0x00 // vpbroadcastd	LCPI0_0(%rip), %ymm0    ## ymm0 = [2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647]
	QUAD $0x0013be0d587de2c4; BYTE $0x00 // vpbroadcastd	LCPI0_1(%rip), %ymm1    ## ymm1 = [2139095040,2139095040,2139095040,2139095040,2139095040,2139095040,2139095040,2139095040]
	QUAD $0x0013b915587de2c4; BYTE $0x00 // vpbroadcastd	LCPI0_2(%rip), %ymm2    ## ymm2 = [1,1,1,1,1,1,1,1]
	LONG $0x97148d48                     // leaq	(%rdi,%rdx,4), %rdx
	QUAD $0x0013b01d587de2c4; BYTE $0x00 // vpbroadcastd	LCPI0_3(%rip), %ymm3    ## ymm3 = [32767,32767,32767,32767,32767,32767,32767,32767]
	QUAD $0x000016f0256ff9c5             // vmovdqa	LCPI0_5(%rip), %xmm4            ## xmm4 = [64,64,64,64,64,64,64,64]

BB0_18:
	LONG $0x6f7ea1c4; WORD $0x822c // vmovdqu	(%rdx,%r8,4), %ymm5
	LONG $0xf0dbd5c5               // vpand	%ymm0, %ymm5, %ymm6
	LONG $0x284df162; WORD $0xc966 // vpcmpgtd	%ymm1, %ymm6, %k1
	LONG $0xd572cdc5; BYTE $0x10   // vpsrld	$16, %ymm5, %ymm6
	LONG $0xfadbcdc5               // vpand	%ymm2, %ymm6, %ymm7
	LONG $0xeffed5c5               // vpaddd	%ymm7, %ymm5, %ymm5
	LONG $0xebfed5c5               // vpaddd	%ymm3, %ymm5, %ymm5
	LONG $0xd572d5c5; BYTE $0x10   // vpsrld	$16, %ymm5, %ymm5
	LONG $0x287ef262; WORD $0xed33 // vpmovdw	%ymm5, %xmm5
	LONG $0x287ef262; WORD $0xf633 // vpmovdw	%ymm6, %xmm6
	LONG $0xf4ebc9c5               // vpor	%xmm4, %xmm6, %xmm6
	LONG $0x09fff162; WORD $0xee6f // vmovdqu16	%xmm6, %xmm5 {%k1}
	LONG $0x7f7a81c4; WORD $0x432c // vmovdqu	%xmm5, (%r11,%r8,2)
	LONG $0x08c08349               // addq	$8, %r8
	WORD $0x394d; BYTE $0xc2       // cmpq	%r8, %r10
	JNE  BB0_18
	WORD $0x394c; BYTE $0xd1       // cmpq	%r10, %rcx
	JNE  BB0_20
	JMP  BB0_30

BB0_26:
	WORD $0x014c; BYTE $0xc2 // addq	%r8, %rdx
	WORD $0x8949; BYTE $0xd1 // movq	%rdx, %r9
	JMP  BB0_20

BB0_28:
	WORD $0xe183; BYTE $0x01       // andl	$1, %ecx
	WORD $0xd101                   // addl	%edx, %ecx
	LONG $0x7fffc181; WORD $0x0000 // addl	$32767, %ecx                    ## imm = 0x7FFF
	WORD $0xe9c1; BYTE $0x10       // shrl	$16, %ecx
	LONG $0x0c894266; BYTE $0x4e   // movw	%cx, (%rsi,%r9,2)
	WORD $0xff49; BYTE $0xc1       // incq	%r9
	WORD $0x394c; BYTE $0xc8       // cmpq	%r9, %rax
	JE   BB0_30

BB0_20:
	LONG $0x8f148b42                           // movl	(%rdi,%r9,4), %edx
	WORD $0x8941; BYTE $0xd0                   // movl	%edx, %r8d
	LONG $0xffe08141; WORD $0xffff; BYTE $0x7f // andl	$2147483647, %r8d               ## imm = 0x7FFFFFFF
	WORD $0xd189                               // movl	%edx, %ecx
	WORD $0xe9c1; BYTE $0x10                   // shrl	$16, %ecx
	LONG $0x01f88141; WORD $0x8000; BYTE $0x7f // cmpl	$2139095041, %r8d               ## imm = 0x7F800001
	JB   BB0_28
	WORD $0xc983; BYTE $0x40                   // orl	$64, %ecx
	LONG $0x0c894266; BYTE $0x4e               // movw	%cx, (%rsi,%r9,2)
	WORD $0xff49; BYTE $0xc1                   // incq	%r9
	WORD $0x394c; BYTE $0xc8                   // cmpq	%r9, %rax
	JNE  BB0_20

BB0_30:
	WORD $0xf8c5; BYTE $0x77 // vzeroupper
	RET

CPI1_0:
CPI1_1:
CPI1_2:
CPI1_3:
CPI1_5:
CPI1_4:
CPI1_6:
CPI1_7:
	//

TEXT ·demote_two_f32_to_bf16_avx512(SB), $0-32
	MOVQ lo+0(FP), DI
	MOVQ hi+8(FP), SI
	MOVQ result+16(FP), DX
	MOVQ len+24(FP), CX
	WORD $0x8b48; BYTE $0x01 // movq	(%rcx), %rax
	LONG $0x20f88348         // cmpq	$32, %rax
	JL   BB1_1
	LONG $0xe0408d4c         // leaq	-32(%rax), %r8
	LONG $0x20f88349         // cmpq	$32, %r8
	JAE  BB1_13
	WORD $0xc931             // xorl	%ecx, %ecx
	JMP  BB1_4

BB1_1:
	WORD $0xc931 // xorl	%ecx, %ecx
	JMP  BB1_6

BB1_13:
	WORD $0x894d; BYTE $0xc1 // movq	%r8, %r9
	LONG $0x05e9c149         // shrq	$5, %r9
	WORD $0xff49; BYTE $0xc1 // incq	%r9
	LONG $0xfee18349         // andq	$-2, %r9
	WORD $0xc931             // xorl	%ecx, %ecx

BB1_14:
	LONG $0x487cf162; WORD $0x0410; BYTE $0x8e // vmovups	(%rsi,%rcx,4), %zmm0
	LONG $0x487ff262; WORD $0x0472; BYTE $0x8f // vcvtne2ps2bf16	(%rdi,%rcx,4), %zmm0, %zmm0
	QUAD $0x018e4c10487cf162                   // vmovups	64(%rsi,%rcx,4), %zmm1
	QUAD $0x018f4c724877f262                   // vcvtne2ps2bf16	64(%rdi,%rcx,4), %zmm1, %zmm1
	LONG $0x487cf162; WORD $0x0411; BYTE $0x8a // vmovups	%zmm0, (%rdx,%rcx,4)
	QUAD $0x018a4c11487cf162                   // vmovups	%zmm1, 64(%rdx,%rcx,4)
	QUAD $0x028e4410487cf162                   // vmovups	128(%rsi,%rcx,4), %zmm0
	QUAD $0x028f4472487ff262                   // vcvtne2ps2bf16	128(%rdi,%rcx,4), %zmm0, %zmm0
	QUAD $0x038e4c10487cf162                   // vmovups	192(%rsi,%rcx,4), %zmm1
	QUAD $0x038f4c724877f262                   // vcvtne2ps2bf16	192(%rdi,%rcx,4), %zmm1, %zmm1
	QUAD $0x028a4411487cf162                   // vmovups	%zmm0, 128(%rdx,%rcx,4)
	QUAD $0x038a4c11487cf162                   // vmovups	%zmm1, 192(%rdx,%rcx,4)
	LONG $0x40c18348                           // addq	$64, %rcx
	LONG $0xfec18349                           // addq	$-2, %r9
	JNE  BB1_14

BB1_4:
	LONG $0x20c0f641                           // testb	$32, %r8b
	JNE  BB1_6
	LONG $0x487cf162; WORD $0x0410; BYTE $0x8e // vmovups	(%rsi,%rcx,4), %zmm0
	LONG $0x487ff262; WORD $0x0472; BYTE $0x8f // vcvtne2ps2bf16	(%rdi,%rcx,4), %zmm0, %zmm0
	QUAD $0x018e4c10487cf162                   // vmovups	64(%rsi,%rcx,4), %zmm1
	QUAD $0x018f4c724877f262                   // vcvtne2ps2bf16	64(%rdi,%rcx,4), %zmm1, %zmm1
	LONG $0x487cf162; WORD $0x0411; BYTE $0x8a // vmovups	%zmm0, (%rdx,%rcx,4)
	QUAD $0x018a4c11487cf162                   // vmovups	%zmm1, 64(%rdx,%rcx,4)
	LONG $0x20c18348                           // addq	$32, %rcx

BB1_6:
	WORD $0x8949; BYTE $0xc8 // movq	%rcx, %r8
	LONG $0x0fc88349         // orq	$15, %r8
	WORD $0x3949; BYTE $0xc0 // cmpq	%rax, %r8
	JGE  BB1_7

BB1_15:
	LONG $0x487cf162; WORD $0x0410; BYTE $0x8e // vmovups	(%rsi,%rcx,4), %zmm0
	LONG $0x487ff262; WORD $0x0472; BYTE $0x8f // vcvtne2ps2bf16	(%rdi,%rcx,4), %zmm0, %zmm0
	LONG $0x487cf162; WORD $0x0411; BYTE $0x8a // vmovups	%zmm0, (%rdx,%rcx,4)
	LONG $0x10418d4c                           // leaq	16(%rcx), %r8
	LONG $0x1fc18348                           // addq	$31, %rcx
	WORD $0x3948; BYTE $0xc1                   // cmpq	%rax, %rcx
	WORD $0x894c; BYTE $0xc1                   // movq	%r8, %rcx
	JL   BB1_15
	WORD $0x894c; BYTE $0xc1                   // movq	%r8, %rcx
	LONG $0x07c98348                           // orq	$7, %rcx
	WORD $0x3948; BYTE $0xc1                   // cmpq	%rax, %rcx
	JL   BB1_28
	JMP  BB1_9

BB1_7:
	WORD $0x8949; BYTE $0xc8 // movq	%rcx, %r8
	WORD $0x894c; BYTE $0xc1 // movq	%r8, %rcx
	LONG $0x07c98348         // orq	$7, %rcx
	WORD $0x3948; BYTE $0xc1 // cmpq	%rax, %rcx
	JGE  BB1_9

BB1_28:
	LONG $0x107ca1c4; WORD $0x8604             // vmovups	(%rsi,%r8,4), %ymm0
	LONG $0x287fb262; WORD $0x0472; BYTE $0x87 // vcvtne2ps2bf16	(%rdi,%r8,4), %ymm0, %ymm0
	LONG $0x117ca1c4; WORD $0x8204             // vmovups	%ymm0, (%rdx,%r8,4)
	LONG $0x08508d4d                           // leaq	8(%r8), %r10
	LONG $0x0fc08349                           // addq	$15, %r8
	WORD $0x3949; BYTE $0xc0                   // cmpq	%rax, %r8
	WORD $0x894d; BYTE $0xd0                   // movq	%r10, %r8
	JL   BB1_28
	WORD $0x8948; BYTE $0xc1                   // movq	%rax, %rcx
	WORD $0x294c; BYTE $0xd1                   // subq	%r10, %rcx
	JG   BB1_11

BB1_35:
	WORD $0xf8c5; BYTE $0x77 // vzeroupper
	RET

BB1_9:
	WORD $0x894d; BYTE $0xc2 // movq	%r8, %r10
	WORD $0x8948; BYTE $0xc1 // movq	%rax, %rcx
	WORD $0x294c; BYTE $0xd1 // subq	%r10, %rcx
	JLE  BB1_35

BB1_11:
	WORD $0x5641             // pushq	%r14
	BYTE $0x53               // pushq	%rbx
	LONG $0x03f98348         // cmpq	$3, %rcx
	JA   BB1_16
	WORD $0x894d; BYTE $0xd1 // movq	%r10, %r9
	JMP  BB1_21

BB1_16:
	LONG $0x10f98348         // cmpq	$16, %rcx
	JAE  BB1_23
	WORD $0x3145; BYTE $0xc0 // xorl	%r8d, %r8d
	JMP  BB1_18

BB1_23:
	WORD $0x8949; BYTE $0xc8               // movq	%rcx, %r8
	LONG $0xf0e08349                       // andq	$-16, %r8
	LONG $0x920c8d4e                       // leaq	(%rdx,%r10,4), %r9
	LONG $0x961c8d4e                       // leaq	(%rsi,%r10,4), %r11
	LONG $0x971c8d4a                       // leaq	(%rdi,%r10,4), %rbx
	WORD $0x3145; BYTE $0xf6               // xorl	%r14d, %r14d
	QUAD $0x11430558487df262; WORD $0x0000 // vpbroadcastd	LCPI1_0(%rip), %zmm0    ## zmm0 = [2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647]
	QUAD $0x113d0d58487df262; WORD $0x0000 // vpbroadcastd	LCPI1_1(%rip), %zmm1    ## zmm1 = [2139095040,2139095040,2139095040,2139095040,2139095040,2139095040,2139095040,2139095040,2139095040,2139095040,2139095040,2139095040,2139095040,2139095040,2139095040,2139095040]
	QUAD $0x11371558487df262; WORD $0x0000 // vpbroadcastd	LCPI1_2(%rip), %zmm2    ## zmm2 = [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
	QUAD $0x11311d58487df262; WORD $0x0000 // vpbroadcastd	LCPI1_3(%rip), %zmm3    ## zmm3 = [32767,32767,32767,32767,32767,32767,32767,32767,32767,32767,32767,32767,32767,32767,32767,32767]
	QUAD $0x000011a1256ffdc5               // vmovdqa	LCPI1_4(%rip), %ymm4            ## ymm4 = [64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64]
	QUAD $0x11232d58487df262; WORD $0x0000 // vpbroadcastd	LCPI1_5(%rip), %zmm5    ## zmm5 = [2139095041,2139095041,2139095041,2139095041,2139095041,2139095041,2139095041,2139095041,2139095041,2139095041,2139095041,2139095041,2139095041,2139095041,2139095041,2139095041]
	QUAD $0x11cd356f48fdf162; WORD $0x0000 // vmovdqa64	LCPI1_6(%rip), %zmm6    ## zmm6 = [0,16,1,17,2,18,3,19,4,20,5,21,6,22,7,23,8,24,9,25,10,26,11,27,12,28,13,29,14,30,15,31]

BB1_24:
	LONG $0x48feb162; WORD $0x3c6f; BYTE $0xb3 // vmovdqu64	(%rbx,%r14,4), %zmm7
	LONG $0x48fe1162; WORD $0x046f; BYTE $0xb3 // vmovdqu64	(%r11,%r14,4), %zmm8
	LONG $0x48457162; WORD $0xc8db             // vpandd	%zmm0, %zmm7, %zmm9
	LONG $0x4835f162; WORD $0xc166             // vpcmpgtd	%zmm1, %zmm9, %k0
	LONG $0x4835f162; WORD $0xd772; BYTE $0x10 // vpsrld	$16, %zmm7, %zmm9
	LONG $0x48357162; WORD $0xd2db             // vpandd	%zmm2, %zmm9, %zmm10
	LONG $0x4845f162; WORD $0xfbfe             // vpaddd	%zmm3, %zmm7, %zmm7
	LONG $0x4845d162; WORD $0xfafe             // vpaddd	%zmm10, %zmm7, %zmm7
	LONG $0x4845f162; WORD $0xd772; BYTE $0x10 // vpsrld	$16, %zmm7, %zmm7
	LONG $0x487ef262; WORD $0xff33             // vpmovdw	%zmm7, %ymm7
	LONG $0x487e5262; WORD $0xc933             // vpmovdw	%zmm9, %ymm9
	LONG $0xcceb35c5                           // vpor	%ymm4, %ymm9, %ymm9
	LONG $0x483d7162; WORD $0xd0db             // vpandd	%zmm0, %zmm8, %zmm10
	LONG $0x482df362; WORD $0xcd1f; BYTE $0x01 // vpcmpltd	%zmm5, %zmm10, %k1
	LONG $0x482dd162; WORD $0xd072; BYTE $0x10 // vpsrld	$16, %zmm8, %zmm10
	LONG $0x482d7162; WORD $0xdadb             // vpandd	%zmm2, %zmm10, %zmm11
	LONG $0x483d7162; WORD $0xc3fe             // vpaddd	%zmm3, %zmm8, %zmm8
	LONG $0x483d5162; WORD $0xc3fe             // vpaddd	%zmm11, %zmm8, %zmm8
	LONG $0x483dd162; WORD $0xd072; BYTE $0x10 // vpsrld	$16, %zmm8, %zmm8
	LONG $0x487e5262; WORD $0xc033             // vpmovdw	%zmm8, %ymm8
	LONG $0x487e5262; WORD $0xd233             // vpmovdw	%zmm10, %ymm10
	LONG $0xd4eb2dc5                           // vpor	%ymm4, %ymm10, %ymm10
	LONG $0xc84bf4c5                           // kunpckwd	%k0, %k1, %k1
	LONG $0x48b55362; WORD $0xc03a; BYTE $0x01 // vinserti64x4	$1, %ymm8, %zmm9, %zmm8
	LONG $0x48c5d362; WORD $0xfa3a; BYTE $0x01 // vinserti64x4	$1, %ymm10, %zmm7, %zmm7
	LONG $0x49ffd162; WORD $0xf86f             // vmovdqu16	%zmm8, %zmm7 {%k1}
	LONG $0x48cdf262; WORD $0xff8d             // vpermw	%zmm7, %zmm6, %zmm7
	LONG $0x48fe9162; WORD $0x3c7f; BYTE $0xb1 // vmovdqu64	%zmm7, (%r9,%r14,4)
	LONG $0x10c68349                           // addq	$16, %r14
	WORD $0x394d; BYTE $0xf0                   // cmpq	%r14, %r8
	JNE  BB1_24
	WORD $0x394c; BYTE $0xc1                   // cmpq	%r8, %rcx
	JE   BB1_34
	WORD $0xc1f6; BYTE $0x0c                   // testb	$12, %cl
	JE   BB1_27

BB1_18:
	WORD $0x8949; BYTE $0xcb             // movq	%rcx, %r11
	LONG $0xfce38349                     // andq	$-4, %r11
	LONG $0x1a0c8d4f                     // leaq	(%r10,%r11), %r9
	LONG $0x921c8d4a                     // leaq	(%rdx,%r10,4), %rbx
	LONG $0x96348d4e                     // leaq	(%rsi,%r10,4), %r14
	QUAD $0x001015055879e2c4; BYTE $0x00 // vpbroadcastd	LCPI1_0(%rip), %xmm0    ## xmm0 = [2147483647,2147483647,2147483647,2147483647]
	QUAD $0x0010100d5879e2c4; BYTE $0x00 // vpbroadcastd	LCPI1_1(%rip), %xmm1    ## xmm1 = [2139095040,2139095040,2139095040,2139095040]
	QUAD $0x00100b155879e2c4; BYTE $0x00 // vpbroadcastd	LCPI1_2(%rip), %xmm2    ## xmm2 = [1,1,1,1]
	QUAD $0x0010061d5879e2c4; BYTE $0x00 // vpbroadcastd	LCPI1_3(%rip), %xmm3    ## xmm3 = [32767,32767,32767,32767]
	LONG $0x97148d4e                     // leaq	(%rdi,%r10,4), %r10
	QUAD $0x00001342256ff9c5             // vmovdqa	LCPI1_7(%rip), %xmm4            ## xmm4 = [64,64,64,64,u,u,u,u]
	QUAD $0x000ff52d5879e2c4; BYTE $0x00 // vpbroadcastd	LCPI1_5(%rip), %xmm5    ## xmm5 = [2139095041,2139095041,2139095041,2139095041]

BB1_19:
	LONG $0x6f7a81c4; WORD $0x8234             // vmovdqu	(%r10,%r8,4), %xmm6
	LONG $0x6f7a81c4; WORD $0x863c             // vmovdqu	(%r14,%r8,4), %xmm7
	LONG $0xc0db49c5                           // vpand	%xmm0, %xmm6, %xmm8
	LONG $0x083df162; WORD $0xc966             // vpcmpgtd	%xmm1, %xmm8, %k1
	LONG $0xd672b9c5; BYTE $0x10               // vpsrld	$16, %xmm6, %xmm8
	LONG $0xcadb39c5                           // vpand	%xmm2, %xmm8, %xmm9
	LONG $0xf3fec9c5                           // vpaddd	%xmm3, %xmm6, %xmm6
	LONG $0xf6feb1c5                           // vpaddd	%xmm6, %xmm9, %xmm6
	LONG $0xd672c9c5; BYTE $0x10               // vpsrld	$16, %xmm6, %xmm6
	LONG $0x2b49e2c4; BYTE $0xf6               // vpackusdw	%xmm6, %xmm6, %xmm6
	LONG $0x2b3942c4; BYTE $0xc0               // vpackusdw	%xmm8, %xmm8, %xmm8
	LONG $0xc4eb39c5                           // vpor	%xmm4, %xmm8, %xmm8
	LONG $0x09ffd162; WORD $0xf06f             // vmovdqu16	%xmm8, %xmm6 {%k1}
	LONG $0xc0db41c5                           // vpand	%xmm0, %xmm7, %xmm8
	LONG $0x083df362; WORD $0xcd1f; BYTE $0x01 // vpcmpltd	%xmm5, %xmm8, %k1
	LONG $0xd772b9c5; BYTE $0x10               // vpsrld	$16, %xmm7, %xmm8
	LONG $0xcadb39c5                           // vpand	%xmm2, %xmm8, %xmm9
	LONG $0xfbfec1c5                           // vpaddd	%xmm3, %xmm7, %xmm7
	LONG $0xfffeb1c5                           // vpaddd	%xmm7, %xmm9, %xmm7
	LONG $0xd772c1c5; BYTE $0x10               // vpsrld	$16, %xmm7, %xmm7
	LONG $0x2b3942c4; BYTE $0xc0               // vpackusdw	%xmm8, %xmm8, %xmm8
	LONG $0xc4eb39c5                           // vpor	%xmm4, %xmm8, %xmm8
	LONG $0x09457262; WORD $0xc02b             // vpackusdw	%xmm0, %xmm7, %xmm8 {%k1}
	LONG $0x6149c1c4; BYTE $0xf0               // vpunpcklwd	%xmm8, %xmm6, %xmm6     ## xmm6 = xmm6[0],xmm8[0],xmm6[1],xmm8[1],xmm6[2],xmm8[2],xmm6[3],xmm8[3]
	LONG $0x7f7aa1c4; WORD $0x8334             // vmovdqu	%xmm6, (%rbx,%r8,4)
	LONG $0x04c08349                           // addq	$4, %r8
	WORD $0x394d; BYTE $0xc3                   // cmpq	%r8, %r11
	JNE  BB1_19
	WORD $0x394c; BYTE $0xd9                   // cmpq	%r11, %rcx
	JNE  BB1_21
	JMP  BB1_34

BB1_27:
	WORD $0x014d; BYTE $0xc2 // addq	%r8, %r10
	WORD $0x894d; BYTE $0xd1 // movq	%r10, %r9
	JMP  BB1_21

BB1_32:
	WORD $0xe183; BYTE $0x01       // andl	$1, %ecx
	WORD $0x0144; BYTE $0xc1       // addl	%r8d, %ecx
	LONG $0x7fffc181; WORD $0x0000 // addl	$32767, %ecx                    ## imm = 0x7FFF
	WORD $0xe9c1; BYTE $0x10       // shrl	$16, %ecx
	LONG $0x4c894266; WORD $0x028a // movw	%cx, 2(%rdx,%r9,4)
	WORD $0xff49; BYTE $0xc1       // incq	%r9
	WORD $0x394c; BYTE $0xc8       // cmpq	%r9, %rax
	JE   BB1_34

BB1_21:
	LONG $0x8f048b46                           // movl	(%rdi,%r9,4), %r8d
	WORD $0x8945; BYTE $0xc2                   // movl	%r8d, %r10d
	LONG $0xffe28141; WORD $0xffff; BYTE $0x7f // andl	$2147483647, %r10d              ## imm = 0x7FFFFFFF
	WORD $0x8944; BYTE $0xc1                   // movl	%r8d, %ecx
	WORD $0xe9c1; BYTE $0x10                   // shrl	$16, %ecx
	LONG $0x01fa8141; WORD $0x8000; BYTE $0x7f // cmpl	$2139095041, %r10d              ## imm = 0x7F800001
	JB   BB1_29
	WORD $0xc983; BYTE $0x40                   // orl	$64, %ecx
	JMP  BB1_30

BB1_29:
	WORD $0xe183; BYTE $0x01       // andl	$1, %ecx
	WORD $0x0144; BYTE $0xc1       // addl	%r8d, %ecx
	LONG $0x7fffc181; WORD $0x0000 // addl	$32767, %ecx                    ## imm = 0x7FFF
	WORD $0xe9c1; BYTE $0x10       // shrl	$16, %ecx

BB1_30:
	LONG $0x8e048b46                           // movl	(%rsi,%r9,4), %r8d
	LONG $0x0c894266; BYTE $0x8a               // movw	%cx, (%rdx,%r9,4)
	WORD $0x8945; BYTE $0xc2                   // movl	%r8d, %r10d
	LONG $0xffe28141; WORD $0xffff; BYTE $0x7f // andl	$2147483647, %r10d              ## imm = 0x7FFFFFFF
	WORD $0x8944; BYTE $0xc1                   // movl	%r8d, %ecx
	WORD $0xe9c1; BYTE $0x10                   // shrl	$16, %ecx
	LONG $0x01fa8141; WORD $0x8000; BYTE $0x7f // cmpl	$2139095041, %r10d              ## imm = 0x7F800001
	JB   BB1_32
	WORD $0xc983; BYTE $0x40                   // orl	$64, %ecx
	LONG $0x4c894266; WORD $0x028a             // movw	%cx, 2(%rdx,%r9,4)
	WORD $0xff49; BYTE $0xc1                   // incq	%r9
	WORD $0x394c; BYTE $0xc8                   // cmpq	%r9, %rax
	JNE  BB1_21

BB1_34:
	BYTE $0x5b               // popq	%rbx
	WORD $0x5e41             // popq	%r14
	WORD $0xf8c5; BYTE $0x77 // vzeroupper
	RET

CPI2_0:
CPI2_1:
	//

TEXT ·promote_bf16_to_f32_avx512(SB), $0-24
	MOVQ a+0(FP), DI
	MOVQ result+8(FP), SI
	MOVQ len+16(FP), DX
	WORD $0x8b48; BYTE $0x02 // movq	(%rdx), %rax
	LONG $0x20f88348         // cmpq	$32, %rax
	JL   BB2_1
	WORD $0xd231             // xorl	%edx, %edx
	QUAD $0x00000f99056ffdc5 // vmovdqa	LCPI2_0(%rip), %ymm0            ## ymm0 = [0,16,2,24,2,17,10,25,8,18,10,26,3,19,11,27]
	QUAD $0x00000fb10d6ffdc5 // vmovdqa	LCPI2_1(%rip), %ymm1            ## ymm1 = [4,20,12,28,4,21,6,29,4,22,12,30,12,23,14,31]

BB2_10:
	LONG $0x146ffec5; BYTE $0x57   // vmovdqu	(%rdi,%rdx,2), %ymm2
	LONG $0x5c6ffec5; WORD $0x2057 // vmovdqu	32(%rdi,%rdx,2), %ymm3
	LONG $0xe4efd9c5               // vpxor	%xmm4, %xmm4, %xmm4
	LONG $0x28fdf262; WORD $0xe27d // vpermt2w	%ymm2, %ymm0, %ymm4
	LONG $0xedefd1c5               // vpxor	%xmm5, %xmm5, %xmm5
	LONG $0x28f5f262; WORD $0xea7d // vpermt2w	%ymm2, %ymm1, %ymm5
	LONG $0xd2efe9c5               // vpxor	%xmm2, %xmm2, %xmm2
	LONG $0x28fdf262; WORD $0xd37d // vpermt2w	%ymm3, %ymm0, %ymm2
	LONG $0xf6efc9c5               // vpxor	%xmm6, %xmm6, %xmm6
	LONG $0x28f5f262; WORD $0xf37d // vpermt2w	%ymm3, %ymm1, %ymm6
	LONG $0x247ffec5; BYTE $0x96   // vmovdqu	%ymm4, (%rsi,%rdx,4)
	LONG $0x6c7ffec5; WORD $0x2096 // vmovdqu	%ymm5, 32(%rsi,%rdx,4)
	LONG $0x547ffec5; WORD $0x4096 // vmovdqu	%ymm2, 64(%rsi,%rdx,4)
	LONG $0x747ffec5; WORD $0x6096 // vmovdqu	%ymm6, 96(%rsi,%rdx,4)
	LONG $0x204a8d48               // leaq	32(%rdx), %rcx
	LONG $0x3fc28348               // addq	$63, %rdx
	WORD $0x3948; BYTE $0xc2       // cmpq	%rax, %rdx
	WORD $0x8948; BYTE $0xca       // movq	%rcx, %rdx
	JL   BB2_10
	WORD $0x8948; BYTE $0xca       // movq	%rcx, %rdx
	LONG $0x0fca8348               // orq	$15, %rdx
	WORD $0x3948; BYTE $0xc2       // cmpq	%rax, %rdx
	JGE  BB2_3

BB2_11:
	QUAD $0x00000f1e056ffdc5 // vmovdqa	LCPI2_0(%rip), %ymm0            ## ymm0 = [0,16,2,24,2,17,10,25,8,18,10,26,3,19,11,27]
	QUAD $0x00000f360d6ffdc5 // vmovdqa	LCPI2_1(%rip), %ymm1            ## ymm1 = [4,20,12,28,4,21,6,29,4,22,12,30,12,23,14,31]

BB2_12:
	LONG $0x146ffec5; BYTE $0x4f   // vmovdqu	(%rdi,%rcx,2), %ymm2
	LONG $0xdbefe1c5               // vpxor	%xmm3, %xmm3, %xmm3
	LONG $0x28fdf262; WORD $0xda7d // vpermt2w	%ymm2, %ymm0, %ymm3
	LONG $0xe4efd9c5               // vpxor	%xmm4, %xmm4, %xmm4
	LONG $0x28f5f262; WORD $0xe27d // vpermt2w	%ymm2, %ymm1, %ymm4
	LONG $0x1c7ffec5; BYTE $0x8e   // vmovdqu	%ymm3, (%rsi,%rcx,4)
	LONG $0x647ffec5; WORD $0x208e // vmovdqu	%ymm4, 32(%rsi,%rcx,4)
	LONG $0x10518d48               // leaq	16(%rcx), %rdx
	LONG $0x1fc18348               // addq	$31, %rcx
	WORD $0x3948; BYTE $0xc1       // cmpq	%rax, %rcx
	WORD $0x8948; BYTE $0xd1       // movq	%rdx, %rcx
	JL   BB2_12
	WORD $0x8948; BYTE $0xd1       // movq	%rdx, %rcx
	LONG $0x07c98348               // orq	$7, %rcx
	WORD $0x3948; BYTE $0xc1       // cmpq	%rax, %rcx
	JGE  BB2_5

BB2_25:
	LONG $0xc0eff9c5 // vpxor	%xmm0, %xmm0, %xmm0

BB2_26:
	LONG $0x0c6ffac5; BYTE $0x57   // vmovdqu	(%rdi,%rdx,2), %xmm1
	LONG $0xd161f9c5               // vpunpcklwd	%xmm1, %xmm0, %xmm2     ## xmm2 = xmm0[0],xmm1[0],xmm0[1],xmm1[1],xmm0[2],xmm1[2],xmm0[3],xmm1[3]
	LONG $0xc969f9c5               // vpunpckhwd	%xmm1, %xmm0, %xmm1     ## xmm1 = xmm0[4],xmm1[4],xmm0[5],xmm1[5],xmm0[6],xmm1[6],xmm0[7],xmm1[7]
	LONG $0x147ffac5; BYTE $0x96   // vmovdqu	%xmm2, (%rsi,%rdx,4)
	LONG $0x4c7ffac5; WORD $0x1096 // vmovdqu	%xmm1, 16(%rsi,%rdx,4)
	LONG $0x084a8d48               // leaq	8(%rdx), %rcx
	LONG $0x0fc28348               // addq	$15, %rdx
	WORD $0x3948; BYTE $0xc2       // cmpq	%rax, %rdx
	WORD $0x8948; BYTE $0xca       // movq	%rcx, %rdx
	JL   BB2_26
	WORD $0x8948; BYTE $0xc2       // movq	%rax, %rdx
	WORD $0x2948; BYTE $0xca       // subq	%rcx, %rdx
	JG   BB2_7
	JMP  BB2_19

BB2_1:
	WORD $0xc931             // xorl	%ecx, %ecx
	WORD $0x8948; BYTE $0xca // movq	%rcx, %rdx
	LONG $0x0fca8348         // orq	$15, %rdx
	WORD $0x3948; BYTE $0xc2 // cmpq	%rax, %rdx
	JL   BB2_11

BB2_3:
	WORD $0x8948; BYTE $0xca // movq	%rcx, %rdx
	WORD $0x8948; BYTE $0xd1 // movq	%rdx, %rcx
	LONG $0x07c98348         // orq	$7, %rcx
	WORD $0x3948; BYTE $0xc1 // cmpq	%rax, %rcx
	JL   BB2_25

BB2_5:
	WORD $0x8948; BYTE $0xd1 // movq	%rdx, %rcx
	WORD $0x8948; BYTE $0xc2 // movq	%rax, %rdx
	WORD $0x2948; BYTE $0xca // subq	%rcx, %rdx
	JLE  BB2_19

BB2_7:
	LONG $0x07fa8348         // cmpq	$7, %rdx
	JA   BB2_13
	WORD $0x8949; BYTE $0xc9 // movq	%rcx, %r9
	JMP  BB2_18

BB2_13:
	LONG $0x40fa8348         // cmpq	$64, %rdx
	JAE  BB2_20
	WORD $0x3145; BYTE $0xc0 // xorl	%r8d, %r8d
	JMP  BB2_15

BB2_20:
	WORD $0x8949; BYTE $0xd0                   // movq	%rdx, %r8
	LONG $0xc0e08349                           // andq	$-64, %r8
	LONG $0x8e0c8d4c                           // leaq	(%rsi,%rcx,4), %r9
	LONG $0xc0c18149; WORD $0x0000; BYTE $0x00 // addq	$192, %r9
	LONG $0x4f148d4c                           // leaq	(%rdi,%rcx,2), %r10
	LONG $0x60c28349                           // addq	$96, %r10
	WORD $0x3145; BYTE $0xdb                   // xorl	%r11d, %r11d

BB2_21:
	QUAD $0xfd5a4433487d9262                   // vpmovzxwd	-96(%r10,%r11,2), %zmm0 ## zmm0 = mem[0],zero,mem[1],zero,mem[2],zero,mem[3],zero,mem[4],zero,mem[5],zero,mem[6],zero,mem[7],zero,mem[8],zero,mem[9],zero,mem[10],zero,mem[11],zero,mem[12],zero,mem[13],zero,mem[14],zero,mem[15],zero
	QUAD $0xfe5a4c33487d9262                   // vpmovzxwd	-64(%r10,%r11,2), %zmm1 ## zmm1 = mem[0],zero,mem[1],zero,mem[2],zero,mem[3],zero,mem[4],zero,mem[5],zero,mem[6],zero,mem[7],zero,mem[8],zero,mem[9],zero,mem[10],zero,mem[11],zero,mem[12],zero,mem[13],zero,mem[14],zero,mem[15],zero
	QUAD $0xff5a5433487d9262                   // vpmovzxwd	-32(%r10,%r11,2), %zmm2 ## zmm2 = mem[0],zero,mem[1],zero,mem[2],zero,mem[3],zero,mem[4],zero,mem[5],zero,mem[6],zero,mem[7],zero,mem[8],zero,mem[9],zero,mem[10],zero,mem[11],zero,mem[12],zero,mem[13],zero,mem[14],zero,mem[15],zero
	LONG $0x487d9262; WORD $0x1c33; BYTE $0x5a // vpmovzxwd	(%r10,%r11,2), %zmm3    ## zmm3 = mem[0],zero,mem[1],zero,mem[2],zero,mem[3],zero,mem[4],zero,mem[5],zero,mem[6],zero,mem[7],zero,mem[8],zero,mem[9],zero,mem[10],zero,mem[11],zero,mem[12],zero,mem[13],zero,mem[14],zero,mem[15],zero
	LONG $0x487df162; WORD $0xf072; BYTE $0x10 // vpslld	$16, %zmm0, %zmm0
	LONG $0x4875f162; WORD $0xf172; BYTE $0x10 // vpslld	$16, %zmm1, %zmm1
	LONG $0x486df162; WORD $0xf272; BYTE $0x10 // vpslld	$16, %zmm2, %zmm2
	LONG $0x4865f162; WORD $0xf372; BYTE $0x10 // vpslld	$16, %zmm3, %zmm3
	QUAD $0xfd99447f48fe9162                   // vmovdqu64	%zmm0, -192(%r9,%r11,4)
	QUAD $0xfe994c7f48fe9162                   // vmovdqu64	%zmm1, -128(%r9,%r11,4)
	QUAD $0xff99547f48fe9162                   // vmovdqu64	%zmm2, -64(%r9,%r11,4)
	LONG $0x48fe9162; WORD $0x1c7f; BYTE $0x99 // vmovdqu64	%zmm3, (%r9,%r11,4)
	LONG $0x40c38349                           // addq	$64, %r11
	WORD $0x394d; BYTE $0xd8                   // cmpq	%r11, %r8
	JNE  BB2_21
	WORD $0x394c; BYTE $0xc2                   // cmpq	%r8, %rdx
	JE   BB2_19
	WORD $0xc2f6; BYTE $0x38                   // testb	$56, %dl
	JE   BB2_24

BB2_15:
	WORD $0x8949; BYTE $0xd2 // movq	%rdx, %r10
	LONG $0xf8e28349         // andq	$-8, %r10
	LONG $0x110c8d4e         // leaq	(%rcx,%r10), %r9
	LONG $0x8e1c8d4c         // leaq	(%rsi,%rcx,4), %r11
	LONG $0x4f0c8d48         // leaq	(%rdi,%rcx,2), %rcx

BB2_16:
	LONG $0x337da2c4; WORD $0x4104 // vpmovzxwd	(%rcx,%r8,2), %ymm0     ## ymm0 = mem[0],zero,mem[1],zero,mem[2],zero,mem[3],zero,mem[4],zero,mem[5],zero,mem[6],zero,mem[7],zero
	LONG $0xf072fdc5; BYTE $0x10   // vpslld	$16, %ymm0, %ymm0
	LONG $0x7f7e81c4; WORD $0x8304 // vmovdqu	%ymm0, (%r11,%r8,4)
	LONG $0x08c08349               // addq	$8, %r8
	WORD $0x394d; BYTE $0xc2       // cmpq	%r8, %r10
	JNE  BB2_16
	WORD $0x394c; BYTE $0xd2       // cmpq	%r10, %rdx
	JNE  BB2_18
	JMP  BB2_19

BB2_24:
	WORD $0x014c; BYTE $0xc1 // addq	%r8, %rcx
	WORD $0x8949; BYTE $0xc9 // movq	%rcx, %r9

BB2_18:
	LONG $0x0cb70f42; BYTE $0x4f // movzwl	(%rdi,%r9,2), %ecx
	WORD $0xe1c1; BYTE $0x10     // shll	$16, %ecx
	LONG $0x8e0c8942             // movl	%ecx, (%rsi,%r9,4)
	WORD $0xff49; BYTE $0xc1     // incq	%r9
	WORD $0x394c; BYTE $0xc8     // cmpq	%r9, %rax
	JNE  BB2_18

BB2_19:
	WORD $0xf8c5; BYTE $0x77 // vzeroupper
	RET

TEXT ·dot_bf16_avx512(SB), $0-32
	MOVQ a+0(FP), DI
	MOVQ b+8(FP), SI
	MOVQ acc+16(FP), DX
	MOVQ len+24(FP), CX
	WORD $0x8b48; BYTE $0x01       // movq	(%rcx), %rax
	LONG $0x487cf162; WORD $0x0210 // vmovups	(%rdx), %zmm0
	LONG $0x00803d48; WORD $0x0000 // cmpq	$128, %rax
	JL   BB3_1
	LONG $0x00007fb9; BYTE $0x00   // movl	$127, %ecx

BB3_13:
	QUAD $0x024f8c10487cf162; WORD $0xffff; BYTE $0xff // vmovups	-254(%rdi,%rcx,2), %zmm1
	QUAD $0x424f9410487cf162; WORD $0xffff; BYTE $0xff // vmovups	-190(%rdi,%rcx,2), %zmm2
	QUAD $0x824f9c10487cf162; WORD $0xffff; BYTE $0xff // vmovups	-126(%rdi,%rcx,2), %zmm3
	QUAD $0xc24fa410487cf162; WORD $0xffff; BYTE $0xff // vmovups	-62(%rdi,%rcx,2), %zmm4
	QUAD $0x024e84524876f262; WORD $0xffff; BYTE $0xff // vdpbf16ps	-254(%rsi,%rcx,2), %zmm1, %zmm0
	QUAD $0x424e8452486ef262; WORD $0xffff; BYTE $0xff // vdpbf16ps	-190(%rsi,%rcx,2), %zmm2, %zmm0
	QUAD $0x824e84524866f262; WORD $0xffff; BYTE $0xff // vdpbf16ps	-126(%rsi,%rcx,2), %zmm3, %zmm0
	QUAD $0xc24e8452485ef262; WORD $0xffff; BYTE $0xff // vdpbf16ps	-62(%rsi,%rcx,2), %zmm4, %zmm0
	LONG $0x80e98348                                   // subq	$-128, %rcx
	WORD $0x3948; BYTE $0xc1                           // cmpq	%rax, %rcx
	JL   BB3_13
	QUAD $0xffffffffff80b849; WORD $0x7fff             // movabsq	$9223372036854775680, %r8       ## imm = 0x7FFFFFFFFFFFFF80
	WORD $0x2149; BYTE $0xc0                           // andq	%rax, %r8
	WORD $0x894c; BYTE $0xc1                           // movq	%r8, %rcx
	LONG $0x1fc98348                                   // orq	$31, %rcx
	WORD $0x3948; BYTE $0xc1                           // cmpq	%rax, %rcx
	JL   BB3_14
	JMP  BB3_4

BB3_1:
	WORD $0x3145; BYTE $0xc0 // xorl	%r8d, %r8d
	WORD $0x894c; BYTE $0xc1 // movq	%r8, %rcx
	LONG $0x1fc98348         // orq	$31, %rcx
	WORD $0x3948; BYTE $0xc1 // cmpq	%rax, %rcx
	JGE  BB3_4

BB3_14:
	LONG $0x487cb162; WORD $0x0c10; BYTE $0x47 // vmovups	(%rdi,%r8,2), %zmm1
	LONG $0x4876b262; WORD $0x0452; BYTE $0x46 // vdpbf16ps	(%rsi,%r8,2), %zmm1, %zmm0
	LONG $0x20488d49                           // leaq	32(%r8), %rcx
	LONG $0x3fc08349                           // addq	$63, %r8
	WORD $0x3949; BYTE $0xc0                   // cmpq	%rax, %r8
	WORD $0x8949; BYTE $0xc8                   // movq	%rcx, %r8
	JL   BB3_14
	WORD $0x8949; BYTE $0xc8                   // movq	%rcx, %r8
	LONG $0x0fc88349                           // orq	$15, %r8
	WORD $0x3949; BYTE $0xc0                   // cmpq	%rax, %r8
	JL   BB3_6

BB3_8:
	LONG $0x487cf162; WORD $0x0211 // vmovups	%zmm0, (%rdx)
	LONG $0x01c98348               // orq	$1, %rcx
	WORD $0x3948; BYTE $0xc1       // cmpq	%rax, %rcx
	JL   BB3_9

BB3_11:
	WORD $0xf8c5; BYTE $0x77 // vzeroupper
	RET

BB3_4:
	WORD $0x894c; BYTE $0xc1 // movq	%r8, %rcx
	WORD $0x8949; BYTE $0xc8 // movq	%rcx, %r8
	LONG $0x0fc88349         // orq	$15, %r8
	WORD $0x3949; BYTE $0xc0 // cmpq	%rax, %r8
	JGE  BB3_8

BB3_6:
	WORD $0x8949; BYTE $0xc8                   // movq	%rcx, %r8
	LONG $0x0c10fcc5; BYTE $0x4f               // vmovups	(%rdi,%rcx,2), %ymm1
	LONG $0x2876f262; WORD $0x0452; BYTE $0x4e // vdpbf16ps	(%rsi,%rcx,2), %ymm1, %ymm0
	LONG $0x10c18348                           // addq	$16, %rcx
	LONG $0x1fc08349                           // addq	$31, %r8
	WORD $0x3949; BYTE $0xc0                   // cmpq	%rax, %r8
	JL   BB3_6
	LONG $0x48fdf362; WORD $0xc01a; BYTE $0x01 // vinsertf64x4	$1, %ymm0, %zmm0, %zmm0
	LONG $0x487cf162; WORD $0x0211             // vmovups	%zmm0, (%rdx)
	LONG $0x01c98348                           // orq	$1, %rcx
	WORD $0x3948; BYTE $0xc1                   // cmpq	%rax, %rcx
	JGE  BB3_11

BB3_9:
	LONG $0x44b70f44; WORD $0xfe4f // movzwl	-2(%rdi,%rcx,2), %r8d
	LONG $0x10e0c141               // shll	$16, %r8d
	LONG $0x6e79c1c4; BYTE $0xc8   // vmovd	%r8d, %xmm1
	LONG $0x04b70f44; BYTE $0x4f   // movzwl	(%rdi,%rcx,2), %r8d
	LONG $0x10e0c141               // shll	$16, %r8d
	LONG $0x6e79c1c4; BYTE $0xd0   // vmovd	%r8d, %xmm2
	LONG $0x44b70f44; WORD $0xfe4e // movzwl	-2(%rsi,%rcx,2), %r8d
	LONG $0x10e0c141               // shll	$16, %r8d
	LONG $0x6e79c1c4; BYTE $0xd8   // vmovd	%r8d, %xmm3
	LONG $0x04b70f44; BYTE $0x4e   // movzwl	(%rsi,%rcx,2), %r8d
	LONG $0x10e0c141               // shll	$16, %r8d
	LONG $0x6e79c1c4; BYTE $0xe0   // vmovd	%r8d, %xmm4
	LONG $0xd459eac5               // vmulss	%xmm4, %xmm2, %xmm2
	LONG $0xb971e2c4; BYTE $0xd3   // vfmadd231ss	%xmm3, %xmm1, %xmm2     ## xmm2 = (xmm1 * xmm3) + xmm2
	LONG $0xc258fac5               // vaddss	%xmm2, %xmm0, %xmm0
	LONG $0x02c18348               // addq	$2, %rcx
	WORD $0x3948; BYTE $0xc1       // cmpq	%rax, %rcx
	JL   BB3_9
	LONG $0x0211fac5               // vmovss	%xmm0, (%rdx)
	WORD $0xf8c5; BYTE $0x77       // vzeroupper
	RET

CPI4_0:
CPI4_1:
CPI4_6:
CPI4_2:
CPI4_3:
CPI4_4:
CPI4_5:
CPI4_7:
	//

TEXT ·add_bf16_avx512(SB), $0-32
	MOVQ a+0(FP), DI
	MOVQ b+8(FP), SI
	MOVQ result+16(FP), DX
	MOVQ len+24(FP), CX
	WORD $0x8b48; BYTE $0x01               // movq	(%rcx), %rax
	LONG $0x20f88348                       // cmpq	$32, %rax
	JL   BB4_1
	WORD $0x3145; BYTE $0xc0               // xorl	%r8d, %r8d
	QUAD $0x0bd6056f48fdf162; WORD $0x0000 // vmovdqa64	LCPI4_0(%rip), %zmm0    ## zmm0 = [128,128,0,1,128,128,2,3,128,128,4,5,128,128,6,7,128,128,0,1,128,128,2,3,128,128,4,5,128,128,6,7,128,128,8,9,128,128,10,11,128,128,12,13,128,128,14,15,128,128,8,9,128,128,10,11,128,128,12,13,128,128,14,15]
	QUAD $0x0c0c0d28487cf162; WORD $0x0000 // vmovaps	LCPI4_1(%rip), %zmm1            ## zmm1 = [0,4,1,5,2,6,3,7,8,12,9,13,10,14,11,15]

BB4_8:
	LONG $0x48fdb262; WORD $0x145b; BYTE $0x46 // vbroadcasti64x4	(%rsi,%r8,2), %zmm2     ## zmm2 = mem[0,1,2,3,0,1,2,3]
	LONG $0x486df262; WORD $0xd000             // vpshufb	%zmm0, %zmm2, %zmm2
	LONG $0x48fdb262; WORD $0x1c5b; BYTE $0x47 // vbroadcasti64x4	(%rdi,%r8,2), %zmm3     ## zmm3 = mem[0,1,2,3,0,1,2,3]
	LONG $0x4865f262; WORD $0xd800             // vpshufb	%zmm0, %zmm3, %zmm3
	LONG $0x4864f162; WORD $0xd258             // vaddps	%zmm2, %zmm3, %zmm2
	LONG $0x4875f262; WORD $0xd216             // vpermps	%zmm2, %zmm1, %zmm2
	QUAD $0x01465c5b48fdb262                   // vbroadcasti64x4	32(%rsi,%r8,2), %zmm3   ## zmm3 = mem[0,1,2,3,0,1,2,3]
	LONG $0x4865f262; WORD $0xd800             // vpshufb	%zmm0, %zmm3, %zmm3
	QUAD $0x0147645b48fdb262                   // vbroadcasti64x4	32(%rdi,%r8,2), %zmm4   ## zmm4 = mem[0,1,2,3,0,1,2,3]
	LONG $0x485df262; WORD $0xe000             // vpshufb	%zmm0, %zmm4, %zmm4
	LONG $0x485cf162; WORD $0xdb58             // vaddps	%zmm3, %zmm4, %zmm3
	LONG $0x4875f262; WORD $0xdb16             // vpermps	%zmm3, %zmm1, %zmm3
	LONG $0x487ef262; WORD $0xd272             // vcvtneps2bf16	%zmm2, %ymm2
	LONG $0x487ef262; WORD $0xdb72             // vcvtneps2bf16	%zmm3, %ymm3
	LONG $0x117ca1c4; WORD $0x4214             // vmovups	%ymm2, (%rdx,%r8,2)
	LONG $0x117ca1c4; WORD $0x425c; BYTE $0x20 // vmovups	%ymm3, 32(%rdx,%r8,2)
	LONG $0x20488d49                           // leaq	32(%r8), %rcx
	LONG $0x3fc08349                           // addq	$63, %r8
	WORD $0x3949; BYTE $0xc0                   // cmpq	%rax, %r8
	WORD $0x8949; BYTE $0xc8                   // movq	%rcx, %r8
	JL   BB4_8
	JMP  BB4_2

BB4_1:
	WORD $0xc931 // xorl	%ecx, %ecx

BB4_2:
	WORD $0x5641                           // pushq	%r14
	BYTE $0x53                             // pushq	%rbx
	WORD $0x8949; BYTE $0xc8               // movq	%rcx, %r8
	LONG $0x0fc88349                       // orq	$15, %r8
	WORD $0x3949; BYTE $0xc0               // cmpq	%rax, %r8
	JGE  BB4_3
	QUAD $0x0b2c056f48fdf162; WORD $0x0000 // vmovdqa64	LCPI4_0(%rip), %zmm0    ## zmm0 = [128,128,0,1,128,128,2,3,128,128,4,5,128,128,6,7,128,128,0,1,128,128,2,3,128,128,4,5,128,128,6,7,128,128,8,9,128,128,10,11,128,128,12,13,128,128,14,15,128,128,8,9,128,128,10,11,128,128,12,13,128,128,14,15]
	QUAD $0x0b620d28487cf162; WORD $0x0000 // vmovaps	LCPI4_1(%rip), %zmm1            ## zmm1 = [0,4,1,5,2,6,3,7,8,12,9,13,10,14,11,15]

BB4_23:
	LONG $0x48fdf262; WORD $0x145b; BYTE $0x4e // vbroadcasti64x4	(%rsi,%rcx,2), %zmm2    ## zmm2 = mem[0,1,2,3,0,1,2,3]
	LONG $0x486df262; WORD $0xd000             // vpshufb	%zmm0, %zmm2, %zmm2
	LONG $0x48fdf262; WORD $0x1c5b; BYTE $0x4f // vbroadcasti64x4	(%rdi,%rcx,2), %zmm3    ## zmm3 = mem[0,1,2,3,0,1,2,3]
	LONG $0x4865f262; WORD $0xd800             // vpshufb	%zmm0, %zmm3, %zmm3
	LONG $0x4864f162; WORD $0xd258             // vaddps	%zmm2, %zmm3, %zmm2
	LONG $0x4875f262; WORD $0xd216             // vpermps	%zmm2, %zmm1, %zmm2
	LONG $0x487ef262; WORD $0xd272             // vcvtneps2bf16	%zmm2, %ymm2
	LONG $0x1411fcc5; BYTE $0x4a               // vmovups	%ymm2, (%rdx,%rcx,2)
	LONG $0x10418d4c                           // leaq	16(%rcx), %r8
	LONG $0x1fc18348                           // addq	$31, %rcx
	WORD $0x3948; BYTE $0xc1                   // cmpq	%rax, %rcx
	WORD $0x894c; BYTE $0xc1                   // movq	%r8, %rcx
	JL   BB4_23
	WORD $0x8948; BYTE $0xc1                   // movq	%rax, %rcx
	WORD $0x294c; BYTE $0xc1                   // subq	%r8, %rcx
	JG   BB4_5
	JMP  BB4_26

BB4_3:
	WORD $0x8949; BYTE $0xc8 // movq	%rcx, %r8
	WORD $0x8948; BYTE $0xc1 // movq	%rax, %rcx
	WORD $0x294c; BYTE $0xc1 // subq	%r8, %rcx
	JLE  BB4_26

BB4_5:
	LONG $0x07f98348         // cmpq	$7, %rcx
	JBE  BB4_6
	WORD $0x8949; BYTE $0xd1 // movq	%rdx, %r9
	WORD $0x2949; BYTE $0xf9 // subq	%rdi, %r9
	LONG $0x40f98349         // cmpq	$64, %r9
	LONG $0xc1920f41         // setb	%r9b
	WORD $0x8949; BYTE $0xd2 // movq	%rdx, %r10
	WORD $0x2949; BYTE $0xf2 // subq	%rsi, %r10
	LONG $0x40fa8349         // cmpq	$64, %r10
	LONG $0xc2920f41         // setb	%r10b
	WORD $0x0845; BYTE $0xca // orb	%r9b, %r10b
	JE   BB4_10

BB4_6:
	WORD $0x894d; BYTE $0xc2 // movq	%r8, %r10
	JMP  BB4_15

BB4_10:
	LONG $0x20f98348         // cmpq	$32, %rcx
	JAE  BB4_17
	WORD $0x3145; BYTE $0xc9 // xorl	%r9d, %r9d
	JMP  BB4_12

BB4_17:
	WORD $0x8949; BYTE $0xc9               // movq	%rcx, %r9
	LONG $0xe0e18349                       // andq	$-32, %r9
	LONG $0x42148d4e                       // leaq	(%rdx,%r8,2), %r10
	LONG $0x461c8d4e                       // leaq	(%rsi,%r8,2), %r11
	LONG $0x471c8d4a                       // leaq	(%rdi,%r8,2), %rbx
	QUAD $0x09390518487df262; WORD $0x0000 // vbroadcastss	LCPI4_2(%rip), %zmm0    ## zmm0 = [NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN]
	QUAD $0x09330d58487df262; WORD $0x0000 // vpbroadcastd	LCPI4_3(%rip), %zmm1    ## zmm1 = [2139095040,2139095040,2139095040,2139095040,2139095040,2139095040,2139095040,2139095040,2139095040,2139095040,2139095040,2139095040,2139095040,2139095040,2139095040,2139095040]
	QUAD $0x092d1558487df262; WORD $0x0000 // vpbroadcastd	LCPI4_4(%rip), %zmm2    ## zmm2 = [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
	WORD $0x3145; BYTE $0xf6               // xorl	%r14d, %r14d
	QUAD $0x09241d58487df262; WORD $0x0000 // vpbroadcastd	LCPI4_5(%rip), %zmm3    ## zmm3 = [32767,32767,32767,32767,32767,32767,32767,32767,32767,32767,32767,32767,32767,32767,32767,32767]
	QUAD $0x0abe256f48fdf162; WORD $0x0000 // vmovdqa64	LCPI4_6(%rip), %zmm4    ## zmm4 = [64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64]

BB4_18:
	LONG $0x487db262; WORD $0x2c33; BYTE $0x73 // vpmovzxwd	(%rbx,%r14,2), %zmm5    ## zmm5 = mem[0],zero,mem[1],zero,mem[2],zero,mem[3],zero,mem[4],zero,mem[5],zero,mem[6],zero,mem[7],zero,mem[8],zero,mem[9],zero,mem[10],zero,mem[11],zero,mem[12],zero,mem[13],zero,mem[14],zero,mem[15],zero
	QUAD $0x01737433487db262                   // vpmovzxwd	32(%rbx,%r14,2), %zmm6  ## zmm6 = mem[0],zero,mem[1],zero,mem[2],zero,mem[3],zero,mem[4],zero,mem[5],zero,mem[6],zero,mem[7],zero,mem[8],zero,mem[9],zero,mem[10],zero,mem[11],zero,mem[12],zero,mem[13],zero,mem[14],zero,mem[15],zero
	LONG $0x484df162; WORD $0xf672; BYTE $0x10 // vpslld	$16, %zmm6, %zmm6
	LONG $0x4855f162; WORD $0xf572; BYTE $0x10 // vpslld	$16, %zmm5, %zmm5
	LONG $0x487d9262; WORD $0x3c33; BYTE $0x73 // vpmovzxwd	(%r11,%r14,2), %zmm7    ## zmm7 = mem[0],zero,mem[1],zero,mem[2],zero,mem[3],zero,mem[4],zero,mem[5],zero,mem[6],zero,mem[7],zero,mem[8],zero,mem[9],zero,mem[10],zero,mem[11],zero,mem[12],zero,mem[13],zero,mem[14],zero,mem[15],zero
	QUAD $0x01734433487d1262                   // vpmovzxwd	32(%r11,%r14,2), %zmm8  ## zmm8 = mem[0],zero,mem[1],zero,mem[2],zero,mem[3],zero,mem[4],zero,mem[5],zero,mem[6],zero,mem[7],zero,mem[8],zero,mem[9],zero,mem[10],zero,mem[11],zero,mem[12],zero,mem[13],zero,mem[14],zero,mem[15],zero
	LONG $0x483dd162; WORD $0xf072; BYTE $0x10 // vpslld	$16, %zmm8, %zmm8
	LONG $0x484cd162; WORD $0xf058             // vaddps	%zmm8, %zmm6, %zmm6
	LONG $0x4845f162; WORD $0xf772; BYTE $0x10 // vpslld	$16, %zmm7, %zmm7
	LONG $0x4854f162; WORD $0xef58             // vaddps	%zmm7, %zmm5, %zmm5
	LONG $0x484cf162; WORD $0xf854             // vandps	%zmm0, %zmm6, %zmm7
	LONG $0x48547162; WORD $0xc054             // vandps	%zmm0, %zmm5, %zmm8
	LONG $0x483df162; WORD $0xc166             // vpcmpgtd	%zmm1, %zmm8, %k0
	LONG $0x4845f162; WORD $0xc966             // vpcmpgtd	%zmm1, %zmm7, %k1
	LONG $0xc84bf4c5                           // kunpckwd	%k0, %k1, %k1
	LONG $0x4845f162; WORD $0xd672; BYTE $0x10 // vpsrld	$16, %zmm6, %zmm7
	LONG $0x483df162; WORD $0xd572; BYTE $0x10 // vpsrld	$16, %zmm5, %zmm8
	LONG $0x483d7162; WORD $0xcadb             // vpandd	%zmm2, %zmm8, %zmm9
	LONG $0x48457162; WORD $0xd2db             // vpandd	%zmm2, %zmm7, %zmm10
	LONG $0x4855f162; WORD $0xebfe             // vpaddd	%zmm3, %zmm5, %zmm5
	LONG $0x4855d162; WORD $0xe9fe             // vpaddd	%zmm9, %zmm5, %zmm5
	LONG $0x484df162; WORD $0xf3fe             // vpaddd	%zmm3, %zmm6, %zmm6
	LONG $0x484dd162; WORD $0xf2fe             // vpaddd	%zmm10, %zmm6, %zmm6
	LONG $0x484df162; WORD $0xd672; BYTE $0x10 // vpsrld	$16, %zmm6, %zmm6
	LONG $0x4855f162; WORD $0xd572; BYTE $0x10 // vpsrld	$16, %zmm5, %zmm5
	LONG $0x487ef262; WORD $0xed33             // vpmovdw	%zmm5, %ymm5
	LONG $0x487ef262; WORD $0xf633             // vpmovdw	%zmm6, %ymm6
	LONG $0x48d5f362; WORD $0xee3a; BYTE $0x01 // vinserti64x4	$1, %ymm6, %zmm5, %zmm5
	LONG $0x487e7262; WORD $0xc633             // vpmovdw	%zmm8, %ymm6
	LONG $0x487ef262; WORD $0xff33             // vpmovdw	%zmm7, %ymm7
	LONG $0x48cdf362; WORD $0xf73a; BYTE $0x01 // vinserti64x4	$1, %ymm7, %zmm6, %zmm6
	LONG $0x48cdf162; WORD $0xf4eb             // vporq	%zmm4, %zmm6, %zmm6
	LONG $0x49fff162; WORD $0xee6f             // vmovdqu16	%zmm6, %zmm5 {%k1}
	LONG $0x48fe9162; WORD $0x2c7f; BYTE $0x72 // vmovdqu64	%zmm5, (%r10,%r14,2)
	LONG $0x20c68349                           // addq	$32, %r14
	WORD $0x394d; BYTE $0xf1                   // cmpq	%r14, %r9
	JNE  BB4_18
	WORD $0x394c; BYTE $0xc9                   // cmpq	%r9, %rcx
	JE   BB4_26
	WORD $0xc1f6; BYTE $0x18                   // testb	$24, %cl
	JE   BB4_21

BB4_12:
	WORD $0x8949; BYTE $0xcb             // movq	%rcx, %r11
	LONG $0xf8e38349                     // andq	$-8, %r11
	LONG $0x18148d4f                     // leaq	(%r8,%r11), %r10
	LONG $0x421c8d4a                     // leaq	(%rdx,%r8,2), %rbx
	LONG $0x46348d4e                     // leaq	(%rsi,%r8,2), %r14
	QUAD $0x0007ea05187de2c4; BYTE $0x00 // vbroadcastss	LCPI4_2(%rip), %ymm0    ## ymm0 = [NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN]
	QUAD $0x0007e50d587de2c4; BYTE $0x00 // vpbroadcastd	LCPI4_3(%rip), %ymm1    ## ymm1 = [2139095040,2139095040,2139095040,2139095040,2139095040,2139095040,2139095040,2139095040]
	QUAD $0x0007e015587de2c4; BYTE $0x00 // vpbroadcastd	LCPI4_4(%rip), %ymm2    ## ymm2 = [1,1,1,1,1,1,1,1]
	LONG $0x47048d4e                     // leaq	(%rdi,%r8,2), %r8
	QUAD $0x0007d71d587de2c4; BYTE $0x00 // vpbroadcastd	LCPI4_5(%rip), %ymm3    ## ymm3 = [32767,32767,32767,32767,32767,32767,32767,32767]
	QUAD $0x00000b13256ff9c5             // vmovdqa	LCPI4_7(%rip), %xmm4            ## xmm4 = [64,64,64,64,64,64,64,64]

BB4_13:
	LONG $0x337d82c4; WORD $0x482c // vpmovzxwd	(%r8,%r9,2), %ymm5      ## ymm5 = mem[0],zero,mem[1],zero,mem[2],zero,mem[3],zero,mem[4],zero,mem[5],zero,mem[6],zero,mem[7],zero
	LONG $0xf572d5c5; BYTE $0x10   // vpslld	$16, %ymm5, %ymm5
	LONG $0x337d82c4; WORD $0x4e34 // vpmovzxwd	(%r14,%r9,2), %ymm6     ## ymm6 = mem[0],zero,mem[1],zero,mem[2],zero,mem[3],zero,mem[4],zero,mem[5],zero,mem[6],zero,mem[7],zero
	LONG $0xf672cdc5; BYTE $0x10   // vpslld	$16, %ymm6, %ymm6
	LONG $0xee58d4c5               // vaddps	%ymm6, %ymm5, %ymm5
	LONG $0xf054d4c5               // vandps	%ymm0, %ymm5, %ymm6
	LONG $0x284df162; WORD $0xc966 // vpcmpgtd	%ymm1, %ymm6, %k1
	LONG $0xd572cdc5; BYTE $0x10   // vpsrld	$16, %ymm5, %ymm6
	LONG $0xfadbcdc5               // vpand	%ymm2, %ymm6, %ymm7
	LONG $0xeffed5c5               // vpaddd	%ymm7, %ymm5, %ymm5
	LONG $0xebfed5c5               // vpaddd	%ymm3, %ymm5, %ymm5
	LONG $0xd572d5c5; BYTE $0x10   // vpsrld	$16, %ymm5, %ymm5
	LONG $0x287ef262; WORD $0xed33 // vpmovdw	%ymm5, %xmm5
	LONG $0x287ef262; WORD $0xf633 // vpmovdw	%ymm6, %xmm6
	LONG $0xf4ebc9c5               // vpor	%xmm4, %xmm6, %xmm6
	LONG $0x09fff162; WORD $0xee6f // vmovdqu16	%xmm6, %xmm5 {%k1}
	LONG $0x7f7aa1c4; WORD $0x4b2c // vmovdqu	%xmm5, (%rbx,%r9,2)
	LONG $0x08c18349               // addq	$8, %r9
	WORD $0x394d; BYTE $0xcb       // cmpq	%r9, %r11
	JNE  BB4_13
	WORD $0x394c; BYTE $0xd9       // cmpq	%r11, %rcx
	JNE  BB4_15
	JMP  BB4_26

BB4_21:
	WORD $0x014d; BYTE $0xc8 // addq	%r9, %r8
	WORD $0x894d; BYTE $0xc2 // movq	%r8, %r10
	JMP  BB4_15

BB4_16:
	WORD $0xc983; BYTE $0x40     // orl	$64, %ecx
	LONG $0x0c894266; BYTE $0x52 // movw	%cx, (%rdx,%r10,2)
	WORD $0xff49; BYTE $0xc2     // incq	%r10
	WORD $0x394c; BYTE $0xd0     // cmpq	%r10, %rax
	JE   BB4_26

BB4_15:
	LONG $0x0cb70f42; BYTE $0x57               // movzwl	(%rdi,%r10,2), %ecx
	WORD $0xe1c1; BYTE $0x10                   // shll	$16, %ecx
	LONG $0xc16ef9c5                           // vmovd	%ecx, %xmm0
	LONG $0x0cb70f42; BYTE $0x56               // movzwl	(%rsi,%r10,2), %ecx
	WORD $0xe1c1; BYTE $0x10                   // shll	$16, %ecx
	LONG $0xc96ef9c5                           // vmovd	%ecx, %xmm1
	LONG $0xc158fac5                           // vaddss	%xmm1, %xmm0, %xmm0
	LONG $0x7e79c1c4; BYTE $0xc0               // vmovd	%xmm0, %r8d
	WORD $0x8945; BYTE $0xc1                   // movl	%r8d, %r9d
	LONG $0xffe18141; WORD $0xffff; BYTE $0x7f // andl	$2147483647, %r9d               ## imm = 0x7FFFFFFF
	WORD $0x8944; BYTE $0xc1                   // movl	%r8d, %ecx
	WORD $0xe9c1; BYTE $0x10                   // shrl	$16, %ecx
	LONG $0x01f98141; WORD $0x8000; BYTE $0x7f // cmpl	$2139095041, %r9d               ## imm = 0x7F800001
	JAE  BB4_16
	WORD $0xe183; BYTE $0x01                   // andl	$1, %ecx
	WORD $0x0144; BYTE $0xc1                   // addl	%r8d, %ecx
	LONG $0x7fffc181; WORD $0x0000             // addl	$32767, %ecx                    ## imm = 0x7FFF
	WORD $0xe9c1; BYTE $0x10                   // shrl	$16, %ecx
	LONG $0x0c894266; BYTE $0x52               // movw	%cx, (%rdx,%r10,2)
	WORD $0xff49; BYTE $0xc2                   // incq	%r10
	WORD $0x394c; BYTE $0xd0                   // cmpq	%r10, %rax
	JNE  BB4_15

BB4_26:
	BYTE $0x5b               // popq	%rbx
	WORD $0x5e41             // popq	%r14
	WORD $0xf8c5; BYTE $0x77 // vzeroupper
	RET

CPI5_0:
CPI5_1:
CPI5_6:
CPI5_2:
CPI5_3:
CPI5_4:
CPI5_5:
CPI5_7:
	//

TEXT ·mul_bf16_avx512(SB), $0-32
	MOVQ a+0(FP), DI
	MOVQ b+8(FP), SI
	MOVQ result+16(FP), DX
	MOVQ len+24(FP), CX
	WORD $0x8b48; BYTE $0x01               // movq	(%rcx), %rax
	LONG $0x10f88348                       // cmpq	$16, %rax
	JL   BB5_1
	WORD $0xc931                           // xorl	%ecx, %ecx
	QUAD $0x08bb056f48fdf162; WORD $0x0000 // vmovdqa64	LCPI5_0(%rip), %zmm0    ## zmm0 = [128,128,0,1,128,128,2,3,128,128,4,5,128,128,6,7,128,128,0,1,128,128,2,3,128,128,4,5,128,128,6,7,128,128,8,9,128,128,10,11,128,128,12,13,128,128,14,15,128,128,8,9,128,128,10,11,128,128,12,13,128,128,14,15]
	QUAD $0x08f10d28487cf162; WORD $0x0000 // vmovaps	LCPI5_1(%rip), %zmm1            ## zmm1 = [0,4,1,5,2,6,3,7,8,12,9,13,10,14,11,15]

BB5_19:
	LONG $0x48fdf262; WORD $0x145b; BYTE $0x4e // vbroadcasti64x4	(%rsi,%rcx,2), %zmm2    ## zmm2 = mem[0,1,2,3,0,1,2,3]
	LONG $0x486df262; WORD $0xd000             // vpshufb	%zmm0, %zmm2, %zmm2
	LONG $0x48fdf262; WORD $0x1c5b; BYTE $0x4f // vbroadcasti64x4	(%rdi,%rcx,2), %zmm3    ## zmm3 = mem[0,1,2,3,0,1,2,3]
	LONG $0x4865f262; WORD $0xd800             // vpshufb	%zmm0, %zmm3, %zmm3
	LONG $0x4864f162; WORD $0xd259             // vmulps	%zmm2, %zmm3, %zmm2
	LONG $0x4875f262; WORD $0xd216             // vpermps	%zmm2, %zmm1, %zmm2
	LONG $0x487ef262; WORD $0xd272             // vcvtneps2bf16	%zmm2, %ymm2
	LONG $0x1411fcc5; BYTE $0x4a               // vmovups	%ymm2, (%rdx,%rcx,2)
	LONG $0x10418d4c                           // leaq	16(%rcx), %r8
	LONG $0x1fc18348                           // addq	$31, %rcx
	WORD $0x3948; BYTE $0xc1                   // cmpq	%rax, %rcx
	WORD $0x894c; BYTE $0xc1                   // movq	%r8, %rcx
	JL   BB5_19
	JMP  BB5_2

BB5_1:
	WORD $0x3145; BYTE $0xc0 // xorl	%r8d, %r8d

BB5_2:
	WORD $0x5641             // pushq	%r14
	BYTE $0x53               // pushq	%rbx
	WORD $0x8948; BYTE $0xc1 // movq	%rax, %rcx
	WORD $0x294c; BYTE $0xc1 // subq	%r8, %rcx
	JLE  BB5_22
	LONG $0x07f98348         // cmpq	$7, %rcx
	JBE  BB5_4
	WORD $0x8949; BYTE $0xd1 // movq	%rdx, %r9
	WORD $0x2949; BYTE $0xf9 // subq	%rdi, %r9
	LONG $0x40f98349         // cmpq	$64, %r9
	LONG $0xc1920f41         // setb	%r9b
	WORD $0x8949; BYTE $0xd2 // movq	%rdx, %r10
	WORD $0x2949; BYTE $0xf2 // subq	%rsi, %r10
	LONG $0x40fa8349         // cmpq	$64, %r10
	LONG $0xc2920f41         // setb	%r10b
	WORD $0x0845; BYTE $0xca // orb	%r9b, %r10b
	JE   BB5_6

BB5_4:
	WORD $0x894d; BYTE $0xc2 // movq	%r8, %r10
	JMP  BB5_11

BB5_6:
	LONG $0x20f98348         // cmpq	$32, %rcx
	JAE  BB5_13
	WORD $0x3145; BYTE $0xc9 // xorl	%r9d, %r9d
	JMP  BB5_8

BB5_13:
	WORD $0x8949; BYTE $0xc9               // movq	%rcx, %r9
	LONG $0xe0e18349                       // andq	$-32, %r9
	LONG $0x42148d4e                       // leaq	(%rdx,%r8,2), %r10
	LONG $0x461c8d4e                       // leaq	(%rsi,%r8,2), %r11
	LONG $0x471c8d4a                       // leaq	(%rdi,%r8,2), %rbx
	QUAD $0x06210518487df262; WORD $0x0000 // vbroadcastss	LCPI5_2(%rip), %zmm0    ## zmm0 = [NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN]
	QUAD $0x061b0d58487df262; WORD $0x0000 // vpbroadcastd	LCPI5_3(%rip), %zmm1    ## zmm1 = [2139095040,2139095040,2139095040,2139095040,2139095040,2139095040,2139095040,2139095040,2139095040,2139095040,2139095040,2139095040,2139095040,2139095040,2139095040,2139095040]
	QUAD $0x06151558487df262; WORD $0x0000 // vpbroadcastd	LCPI5_4(%rip), %zmm2    ## zmm2 = [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
	WORD $0x3145; BYTE $0xf6               // xorl	%r14d, %r14d
	QUAD $0x060c1d58487df262; WORD $0x0000 // vpbroadcastd	LCPI5_5(%rip), %zmm3    ## zmm3 = [32767,32767,32767,32767,32767,32767,32767,32767,32767,32767,32767,32767,32767,32767,32767,32767]
	QUAD $0x0856256f48fdf162; WORD $0x0000 // vmovdqa64	LCPI5_6(%rip), %zmm4    ## zmm4 = [64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64]

BB5_14:
	LONG $0x487db262; WORD $0x2c33; BYTE $0x73 // vpmovzxwd	(%rbx,%r14,2), %zmm5    ## zmm5 = mem[0],zero,mem[1],zero,mem[2],zero,mem[3],zero,mem[4],zero,mem[5],zero,mem[6],zero,mem[7],zero,mem[8],zero,mem[9],zero,mem[10],zero,mem[11],zero,mem[12],zero,mem[13],zero,mem[14],zero,mem[15],zero
	QUAD $0x01737433487db262                   // vpmovzxwd	32(%rbx,%r14,2), %zmm6  ## zmm6 = mem[0],zero,mem[1],zero,mem[2],zero,mem[3],zero,mem[4],zero,mem[5],zero,mem[6],zero,mem[7],zero,mem[8],zero,mem[9],zero,mem[10],zero,mem[11],zero,mem[12],zero,mem[13],zero,mem[14],zero,mem[15],zero
	LONG $0x484df162; WORD $0xf672; BYTE $0x10 // vpslld	$16, %zmm6, %zmm6
	LONG $0x4855f162; WORD $0xf572; BYTE $0x10 // vpslld	$16, %zmm5, %zmm5
	LONG $0x487d9262; WORD $0x3c33; BYTE $0x73 // vpmovzxwd	(%r11,%r14,2), %zmm7    ## zmm7 = mem[0],zero,mem[1],zero,mem[2],zero,mem[3],zero,mem[4],zero,mem[5],zero,mem[6],zero,mem[7],zero,mem[8],zero,mem[9],zero,mem[10],zero,mem[11],zero,mem[12],zero,mem[13],zero,mem[14],zero,mem[15],zero
	QUAD $0x01734433487d1262                   // vpmovzxwd	32(%r11,%r14,2), %zmm8  ## zmm8 = mem[0],zero,mem[1],zero,mem[2],zero,mem[3],zero,mem[4],zero,mem[5],zero,mem[6],zero,mem[7],zero,mem[8],zero,mem[9],zero,mem[10],zero,mem[11],zero,mem[12],zero,mem[13],zero,mem[14],zero,mem[15],zero
	LONG $0x483dd162; WORD $0xf072; BYTE $0x10 // vpslld	$16, %zmm8, %zmm8
	LONG $0x484cd162; WORD $0xf059             // vmulps	%zmm8, %zmm6, %zmm6
	LONG $0x4845f162; WORD $0xf772; BYTE $0x10 // vpslld	$16, %zmm7, %zmm7
	LONG $0x4854f162; WORD $0xef59             // vmulps	%zmm7, %zmm5, %zmm5
	LONG $0x484cf162; WORD $0xf854             // vandps	%zmm0, %zmm6, %zmm7
	LONG $0x48547162; WORD $0xc054             // vandps	%zmm0, %zmm5, %zmm8
	LONG $0x483df162; WORD $0xc166             // vpcmpgtd	%zmm1, %zmm8, %k0
	LONG $0x4845f162; WORD $0xc966             // vpcmpgtd	%zmm1, %zmm7, %k1
	LONG $0xc84bf4c5                           // kunpckwd	%k0, %k1, %k1
	LONG $0x4845f162; WORD $0xd672; BYTE $0x10 // vpsrld	$16, %zmm6, %zmm7
	LONG $0x483df162; WORD $0xd572; BYTE $0x10 // vpsrld	$16, %zmm5, %zmm8
	LONG $0x483d7162; WORD $0xcadb             // vpandd	%zmm2, %zmm8, %zmm9
	LONG $0x48457162; WORD $0xd2db             // vpandd	%zmm2, %zmm7, %zmm10
	LONG $0x4855f162; WORD $0xebfe             // vpaddd	%zmm3, %zmm5, %zmm5
	LONG $0x4855d162; WORD $0xe9fe             // vpaddd	%zmm9, %zmm5, %zmm5
	LONG $0x484df162; WORD $0xf3fe             // vpaddd	%zmm3, %zmm6, %zmm6
	LONG $0x484dd162; WORD $0xf2fe             // vpaddd	%zmm10, %zmm6, %zmm6
	LONG $0x484df162; WORD $0xd672; BYTE $0x10 // vpsrld	$16, %zmm6, %zmm6
	LONG $0x4855f162; WORD $0xd572; BYTE $0x10 // vpsrld	$16, %zmm5, %zmm5
	LONG $0x487ef262; WORD $0xed33             // vpmovdw	%zmm5, %ymm5
	LONG $0x487ef262; WORD $0xf633             // vpmovdw	%zmm6, %ymm6
	LONG $0x48d5f362; WORD $0xee3a; BYTE $0x01 // vinserti64x4	$1, %ymm6, %zmm5, %zmm5
	LONG $0x487e7262; WORD $0xc633             // vpmovdw	%zmm8, %ymm6
	LONG $0x487ef262; WORD $0xff33             // vpmovdw	%zmm7, %ymm7
	LONG $0x48cdf362; WORD $0xf73a; BYTE $0x01 // vinserti64x4	$1, %ymm7, %zmm6, %zmm6
	LONG $0x48cdf162; WORD $0xf4eb             // vporq	%zmm4, %zmm6, %zmm6
	LONG $0x49fff162; WORD $0xee6f             // vmovdqu16	%zmm6, %zmm5 {%k1}
	LONG $0x48fe9162; WORD $0x2c7f; BYTE $0x72 // vmovdqu64	%zmm5, (%r10,%r14,2)
	LONG $0x20c68349                           // addq	$32, %r14
	WORD $0x394d; BYTE $0xf1                   // cmpq	%r14, %r9
	JNE  BB5_14
	WORD $0x394c; BYTE $0xc9                   // cmpq	%r9, %rcx
	JE   BB5_22
	WORD $0xc1f6; BYTE $0x18                   // testb	$24, %cl
	JE   BB5_17

BB5_8:
	WORD $0x8949; BYTE $0xcb             // movq	%rcx, %r11
	LONG $0xf8e38349                     // andq	$-8, %r11
	LONG $0x18148d4f                     // leaq	(%r8,%r11), %r10
	LONG $0x421c8d4a                     // leaq	(%rdx,%r8,2), %rbx
	LONG $0x46348d4e                     // leaq	(%rsi,%r8,2), %r14
	QUAD $0x0004da05187de2c4; BYTE $0x00 // vbroadcastss	LCPI5_2(%rip), %ymm0    ## ymm0 = [NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN]
	QUAD $0x0004d50d587de2c4; BYTE $0x00 // vpbroadcastd	LCPI5_3(%rip), %ymm1    ## ymm1 = [2139095040,2139095040,2139095040,2139095040,2139095040,2139095040,2139095040,2139095040]
	QUAD $0x0004d015587de2c4; BYTE $0x00 // vpbroadcastd	LCPI5_4(%rip), %ymm2    ## ymm2 = [1,1,1,1,1,1,1,1]
	LONG $0x47048d4e                     // leaq	(%rdi,%r8,2), %r8
	QUAD $0x0004c71d587de2c4; BYTE $0x00 // vpbroadcastd	LCPI5_5(%rip), %ymm3    ## ymm3 = [32767,32767,32767,32767,32767,32767,32767,32767]
	QUAD $0x00000803256ff9c5             // vmovdqa	LCPI5_7(%rip), %xmm4            ## xmm4 = [64,64,64,64,64,64,64,64]

BB5_9:
	LONG $0x337d82c4; WORD $0x482c // vpmovzxwd	(%r8,%r9,2), %ymm5      ## ymm5 = mem[0],zero,mem[1],zero,mem[2],zero,mem[3],zero,mem[4],zero,mem[5],zero,mem[6],zero,mem[7],zero
	LONG $0xf572d5c5; BYTE $0x10   // vpslld	$16, %ymm5, %ymm5
	LONG $0x337d82c4; WORD $0x4e34 // vpmovzxwd	(%r14,%r9,2), %ymm6     ## ymm6 = mem[0],zero,mem[1],zero,mem[2],zero,mem[3],zero,mem[4],zero,mem[5],zero,mem[6],zero,mem[7],zero
	LONG $0xf672cdc5; BYTE $0x10   // vpslld	$16, %ymm6, %ymm6
	LONG $0xee59d4c5               // vmulps	%ymm6, %ymm5, %ymm5
	LONG $0xf054d4c5               // vandps	%ymm0, %ymm5, %ymm6
	LONG $0x284df162; WORD $0xc966 // vpcmpgtd	%ymm1, %ymm6, %k1
	LONG $0xd572cdc5; BYTE $0x10   // vpsrld	$16, %ymm5, %ymm6
	LONG $0xfadbcdc5               // vpand	%ymm2, %ymm6, %ymm7
	LONG $0xeffed5c5               // vpaddd	%ymm7, %ymm5, %ymm5
	LONG $0xebfed5c5               // vpaddd	%ymm3, %ymm5, %ymm5
	LONG $0xd572d5c5; BYTE $0x10   // vpsrld	$16, %ymm5, %ymm5
	LONG $0x287ef262; WORD $0xed33 // vpmovdw	%ymm5, %xmm5
	LONG $0x287ef262; WORD $0xf633 // vpmovdw	%ymm6, %xmm6
	LONG $0xf4ebc9c5               // vpor	%xmm4, %xmm6, %xmm6
	LONG $0x09fff162; WORD $0xee6f // vmovdqu16	%xmm6, %xmm5 {%k1}
	LONG $0x7f7aa1c4; WORD $0x4b2c // vmovdqu	%xmm5, (%rbx,%r9,2)
	LONG $0x08c18349               // addq	$8, %r9
	WORD $0x394d; BYTE $0xcb       // cmpq	%r9, %r11
	JNE  BB5_9
	WORD $0x394c; BYTE $0xd9       // cmpq	%r11, %rcx
	JNE  BB5_11
	JMP  BB5_22

BB5_17:
	WORD $0x014d; BYTE $0xc8 // addq	%r9, %r8
	WORD $0x894d; BYTE $0xc2 // movq	%r8, %r10
	JMP  BB5_11

BB5_12:
	WORD $0xc983; BYTE $0x40     // orl	$64, %ecx
	LONG $0x0c894266; BYTE $0x52 // movw	%cx, (%rdx,%r10,2)
	WORD $0xff49; BYTE $0xc2     // incq	%r10
	WORD $0x394c; BYTE $0xd0     // cmpq	%r10, %rax
	JE   BB5_22

BB5_11:
	LONG $0x0cb70f42; BYTE $0x57               // movzwl	(%rdi,%r10,2), %ecx
	WORD $0xe1c1; BYTE $0x10                   // shll	$16, %ecx
	LONG $0xc16ef9c5                           // vmovd	%ecx, %xmm0
	LONG $0x0cb70f42; BYTE $0x56               // movzwl	(%rsi,%r10,2), %ecx
	WORD $0xe1c1; BYTE $0x10                   // shll	$16, %ecx
	LONG $0xc96ef9c5                           // vmovd	%ecx, %xmm1
	LONG $0xc159fac5                           // vmulss	%xmm1, %xmm0, %xmm0
	LONG $0x7e79c1c4; BYTE $0xc0               // vmovd	%xmm0, %r8d
	WORD $0x8945; BYTE $0xc1                   // movl	%r8d, %r9d
	LONG $0xffe18141; WORD $0xffff; BYTE $0x7f // andl	$2147483647, %r9d               ## imm = 0x7FFFFFFF
	WORD $0x8944; BYTE $0xc1                   // movl	%r8d, %ecx
	WORD $0xe9c1; BYTE $0x10                   // shrl	$16, %ecx
	LONG $0x01f98141; WORD $0x8000; BYTE $0x7f // cmpl	$2139095041, %r9d               ## imm = 0x7F800001
	JAE  BB5_12
	WORD $0xe183; BYTE $0x01                   // andl	$1, %ecx
	WORD $0x0144; BYTE $0xc1                   // addl	%r8d, %ecx
	LONG $0x7fffc181; WORD $0x0000             // addl	$32767, %ecx                    ## imm = 0x7FFF
	WORD $0xe9c1; BYTE $0x10                   // shrl	$16, %ecx
	LONG $0x0c894266; BYTE $0x52               // movw	%cx, (%rdx,%r10,2)
	WORD $0xff49; BYTE $0xc2                   // incq	%r10
	WORD $0x394c; BYTE $0xd0                   // cmpq	%r10, %rax
	JNE  BB5_11

BB5_22:
	BYTE $0x5b               // popq	%rbx
	WORD $0x5e41             // popq	%r14
	WORD $0xf8c5; BYTE $0x77 // vzeroupper
	RET

CPI6_0:
CPI6_5:
CPI6_1:
CPI6_2:
CPI6_3:
CPI6_4:
CPI6_6:
	//

TEXT ·fma_bf16_avx512(SB), $0-40
	MOVQ a+0(FP), DI
	MOVQ b+8(FP), SI
	MOVQ c+16(FP), DX
	MOVQ result+24(FP), CX
	MOVQ len+32(FP), R8
	WORD $0x8b49; BYTE $0x00               // movq	(%r8), %rax
	LONG $0x10f88348                       // cmpq	$16, %rax
	JL   BB6_1
	WORD $0x3145; BYTE $0xc0               // xorl	%r8d, %r8d
	LONG $0xc0eff9c5                       // vpxor	%xmm0, %xmm0, %xmm0
	QUAD $0x06560d28487cf162; WORD $0x0000 // vmovaps	LCPI6_0(%rip), %zmm1            ## zmm1 = [0,4,1,5,2,6,3,7,16,20,17,21,18,22,19,23]

BB6_19:
	LONG $0x6f7ea1c4; WORD $0x4714 // vmovdqu	(%rdi,%r8,2), %ymm2
	LONG $0x6f7ea1c4; WORD $0x461c // vmovdqu	(%rsi,%r8,2), %ymm3
	LONG $0x6f7ea1c4; WORD $0x4224 // vmovdqu	(%rdx,%r8,2), %ymm4
	LONG $0xea61fdc5               // vpunpcklwd	%ymm2, %ymm0, %ymm5     ## ymm5 = ymm0[0],ymm2[0],ymm0[1],ymm2[1],ymm0[2],ymm2[2],ymm0[3],ymm2[3],ymm0[8],ymm2[8],ymm0[9],ymm2[9],ymm0[10],ymm2[10],ymm0[11],ymm2[11]
	LONG $0xd269fdc5               // vpunpckhwd	%ymm2, %ymm0, %ymm2     ## ymm2 = ymm0[4],ymm2[4],ymm0[5],ymm2[5],ymm0[6],ymm2[6],ymm0[7],ymm2[7],ymm0[12],ymm2[12],ymm0[13],ymm2[13],ymm0[14],ymm2[14],ymm0[15],ymm2[15]
	LONG $0xf361fdc5               // vpunpcklwd	%ymm3, %ymm0, %ymm6     ## ymm6 = ymm0[0],ymm3[0],ymm0[1],ymm3[1],ymm0[2],ymm3[2],ymm0[3],ymm3[3],ymm0[8],ymm3[8],ymm0[9],ymm3[9],ymm0[10],ymm3[10],ymm0[11],ymm3[11]
	LONG $0xdb69fdc5               // vpunpckhwd	%ymm3, %ymm0, %ymm3     ## ymm3 = ymm0[4],ymm3[4],ymm0[5],ymm3[5],ymm0[6],ymm3[6],ymm0[7],ymm3[7],ymm0[12],ymm3[12],ymm0[13],ymm3[13],ymm0[14],ymm3[14],ymm0[15],ymm3[15]
	LONG $0xfc61fdc5               // vpunpcklwd	%ymm4, %ymm0, %ymm7     ## ymm7 = ymm0[0],ymm4[0],ymm0[1],ymm4[1],ymm0[2],ymm4[2],ymm0[3],ymm4[3],ymm0[8],ymm4[8],ymm0[9],ymm4[9],ymm0[10],ymm4[10],ymm0[11],ymm4[11]
	LONG $0xb855e2c4; BYTE $0xfe   // vfmadd231ps	%ymm6, %ymm5, %ymm7     ## ymm7 = (ymm5 * ymm6) + ymm7
	LONG $0xe469fdc5               // vpunpckhwd	%ymm4, %ymm0, %ymm4     ## ymm4 = ymm0[4],ymm4[4],ymm0[5],ymm4[5],ymm0[6],ymm4[6],ymm0[7],ymm4[7],ymm0[12],ymm4[12],ymm0[13],ymm4[13],ymm0[14],ymm4[14],ymm0[15],ymm4[15]
	LONG $0xb86de2c4; BYTE $0xe3   // vfmadd231ps	%ymm3, %ymm2, %ymm4     ## ymm4 = (ymm2 * ymm3) + ymm4
	LONG $0x4875f262; WORD $0xfc7f // vpermt2ps	%zmm4, %zmm1, %zmm7
	LONG $0x487ef262; WORD $0xd772 // vcvtneps2bf16	%zmm7, %ymm2
	LONG $0x117ca1c4; WORD $0x4114 // vmovups	%ymm2, (%rcx,%r8,2)
	LONG $0x10488d4d               // leaq	16(%r8), %r9
	LONG $0x1fc08349               // addq	$31, %r8
	WORD $0x3949; BYTE $0xc0       // cmpq	%rax, %r8
	WORD $0x894d; BYTE $0xc8       // movq	%r9, %r8
	JL   BB6_19
	JMP  BB6_2

BB6_1:
	WORD $0x3145; BYTE $0xc9 // xorl	%r9d, %r9d

BB6_2:
	WORD $0x5741             // pushq	%r15
	WORD $0x5641             // pushq	%r14
	WORD $0x5441             // pushq	%r12
	BYTE $0x53               // pushq	%rbx
	WORD $0x8949; BYTE $0xc0 // movq	%rax, %r8
	WORD $0x294d; BYTE $0xc8 // subq	%r9, %r8
	JLE  BB6_22
	LONG $0x07f88349         // cmpq	$7, %r8
	JBE  BB6_4
	WORD $0x8949; BYTE $0xca // movq	%rcx, %r10
	WORD $0x2949; BYTE $0xfa // subq	%rdi, %r10
	LONG $0x40fa8349         // cmpq	$64, %r10
	LONG $0xc2920f41         // setb	%r10b
	WORD $0x8949; BYTE $0xcb // movq	%rcx, %r11
	WORD $0x2949; BYTE $0xf3 // subq	%rsi, %r11
	LONG $0x40fb8349         // cmpq	$64, %r11
	LONG $0xc3920f41         // setb	%r11b
	WORD $0x0845; BYTE $0xd3 // orb	%r10b, %r11b
	WORD $0x8949; BYTE $0xca // movq	%rcx, %r10
	WORD $0x2949; BYTE $0xd2 // subq	%rdx, %r10
	LONG $0x40fa8349         // cmpq	$64, %r10
	LONG $0xc2920f41         // setb	%r10b
	WORD $0x0845; BYTE $0xda // orb	%r11b, %r10b
	JE   BB6_6

BB6_4:
	WORD $0x894d; BYTE $0xcb // movq	%r9, %r11
	JMP  BB6_11

BB6_6:
	LONG $0x20f88349         // cmpq	$32, %r8
	JAE  BB6_13
	WORD $0x3145; BYTE $0xd2 // xorl	%r10d, %r10d
	JMP  BB6_8

BB6_13:
	WORD $0x894d; BYTE $0xc2               // movq	%r8, %r10
	LONG $0xe0e28349                       // andq	$-32, %r10
	LONG $0x491c8d4e                       // leaq	(%rcx,%r9,2), %r11
	LONG $0x4a1c8d4a                       // leaq	(%rdx,%r9,2), %rbx
	LONG $0x4e348d4e                       // leaq	(%rsi,%r9,2), %r14
	LONG $0x4f3c8d4e                       // leaq	(%rdi,%r9,2), %r15
	QUAD $0x02e30518487df262; WORD $0x0000 // vbroadcastss	LCPI6_1(%rip), %zmm0    ## zmm0 = [NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN]
	QUAD $0x02dd0d58487df262; WORD $0x0000 // vpbroadcastd	LCPI6_2(%rip), %zmm1    ## zmm1 = [2139095040,2139095040,2139095040,2139095040,2139095040,2139095040,2139095040,2139095040,2139095040,2139095040,2139095040,2139095040,2139095040,2139095040,2139095040,2139095040]
	QUAD $0x02d71558487df262; WORD $0x0000 // vpbroadcastd	LCPI6_3(%rip), %zmm2    ## zmm2 = [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
	WORD $0x3145; BYTE $0xe4               // xorl	%r12d, %r12d
	QUAD $0x02ce1d58487df262; WORD $0x0000 // vpbroadcastd	LCPI6_4(%rip), %zmm3    ## zmm3 = [32767,32767,32767,32767,32767,32767,32767,32767,32767,32767,32767,32767,32767,32767,32767,32767]
	QUAD $0x0588256f48fdf162; WORD $0x0000 // vmovdqa64	LCPI6_5(%rip), %zmm4    ## zmm4 = [64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64]

BB6_14:
	LONG $0x487d9262; WORD $0x2c33; BYTE $0x67 // vpmovzxwd	(%r15,%r12,2), %zmm5    ## zmm5 = mem[0],zero,mem[1],zero,mem[2],zero,mem[3],zero,mem[4],zero,mem[5],zero,mem[6],zero,mem[7],zero,mem[8],zero,mem[9],zero,mem[10],zero,mem[11],zero,mem[12],zero,mem[13],zero,mem[14],zero,mem[15],zero
	QUAD $0x01677433487d9262                   // vpmovzxwd	32(%r15,%r12,2), %zmm6  ## zmm6 = mem[0],zero,mem[1],zero,mem[2],zero,mem[3],zero,mem[4],zero,mem[5],zero,mem[6],zero,mem[7],zero,mem[8],zero,mem[9],zero,mem[10],zero,mem[11],zero,mem[12],zero,mem[13],zero,mem[14],zero,mem[15],zero
	LONG $0x484df162; WORD $0xf672; BYTE $0x10 // vpslld	$16, %zmm6, %zmm6
	LONG $0x4855f162; WORD $0xf572; BYTE $0x10 // vpslld	$16, %zmm5, %zmm5
	LONG $0x487d9262; WORD $0x3c33; BYTE $0x66 // vpmovzxwd	(%r14,%r12,2), %zmm7    ## zmm7 = mem[0],zero,mem[1],zero,mem[2],zero,mem[3],zero,mem[4],zero,mem[5],zero,mem[6],zero,mem[7],zero,mem[8],zero,mem[9],zero,mem[10],zero,mem[11],zero,mem[12],zero,mem[13],zero,mem[14],zero,mem[15],zero
	QUAD $0x01664433487d1262                   // vpmovzxwd	32(%r14,%r12,2), %zmm8  ## zmm8 = mem[0],zero,mem[1],zero,mem[2],zero,mem[3],zero,mem[4],zero,mem[5],zero,mem[6],zero,mem[7],zero,mem[8],zero,mem[9],zero,mem[10],zero,mem[11],zero,mem[12],zero,mem[13],zero,mem[14],zero,mem[15],zero
	LONG $0x483dd162; WORD $0xf072; BYTE $0x10 // vpslld	$16, %zmm8, %zmm8
	LONG $0x4845f162; WORD $0xf772; BYTE $0x10 // vpslld	$16, %zmm7, %zmm7
	LONG $0x487d3262; WORD $0x0c33; BYTE $0x63 // vpmovzxwd	(%rbx,%r12,2), %zmm9    ## zmm9 = mem[0],zero,mem[1],zero,mem[2],zero,mem[3],zero,mem[4],zero,mem[5],zero,mem[6],zero,mem[7],zero,mem[8],zero,mem[9],zero,mem[10],zero,mem[11],zero,mem[12],zero,mem[13],zero,mem[14],zero,mem[15],zero
	QUAD $0x01635433487d3262                   // vpmovzxwd	32(%rbx,%r12,2), %zmm10 ## zmm10 = mem[0],zero,mem[1],zero,mem[2],zero,mem[3],zero,mem[4],zero,mem[5],zero,mem[6],zero,mem[7],zero,mem[8],zero,mem[9],zero,mem[10],zero,mem[11],zero,mem[12],zero,mem[13],zero,mem[14],zero,mem[15],zero
	LONG $0x482dd162; WORD $0xf272; BYTE $0x10 // vpslld	$16, %zmm10, %zmm10
	LONG $0x484d5262; WORD $0xd0b8             // vfmadd231ps	%zmm8, %zmm6, %zmm10    ## zmm10 = (zmm6 * zmm8) + zmm10
	LONG $0x484dd162; WORD $0xf172; BYTE $0x10 // vpslld	$16, %zmm9, %zmm6
	LONG $0x4855f262; WORD $0xf7b8             // vfmadd231ps	%zmm7, %zmm5, %zmm6     ## zmm6 = (zmm5 * zmm7) + zmm6
	LONG $0x482cf162; WORD $0xe854             // vandps	%zmm0, %zmm10, %zmm5
	LONG $0x484cf162; WORD $0xf854             // vandps	%zmm0, %zmm6, %zmm7
	LONG $0x4845f162; WORD $0xc166             // vpcmpgtd	%zmm1, %zmm7, %k0
	LONG $0x4855f162; WORD $0xc966             // vpcmpgtd	%zmm1, %zmm5, %k1
	LONG $0xc84bf4c5                           // kunpckwd	%k0, %k1, %k1
	LONG $0x4855d162; WORD $0xd272; BYTE $0x10 // vpsrld	$16, %zmm10, %zmm5
	LONG $0x4845f162; WORD $0xd672; BYTE $0x10 // vpsrld	$16, %zmm6, %zmm7
	LONG $0x48457162; WORD $0xc2db             // vpandd	%zmm2, %zmm7, %zmm8
	LONG $0x48557162; WORD $0xcadb             // vpandd	%zmm2, %zmm5, %zmm9
	LONG $0x484df162; WORD $0xf3fe             // vpaddd	%zmm3, %zmm6, %zmm6
	LONG $0x484dd162; WORD $0xf0fe             // vpaddd	%zmm8, %zmm6, %zmm6
	LONG $0x482d7162; WORD $0xc3fe             // vpaddd	%zmm3, %zmm10, %zmm8
	LONG $0x483d5162; WORD $0xc1fe             // vpaddd	%zmm9, %zmm8, %zmm8
	LONG $0x483dd162; WORD $0xd072; BYTE $0x10 // vpsrld	$16, %zmm8, %zmm8
	LONG $0x484df162; WORD $0xd672; BYTE $0x10 // vpsrld	$16, %zmm6, %zmm6
	LONG $0x487ef262; WORD $0xf633             // vpmovdw	%zmm6, %ymm6
	LONG $0x487e5262; WORD $0xc033             // vpmovdw	%zmm8, %ymm8
	LONG $0x48cdd362; WORD $0xf03a; BYTE $0x01 // vinserti64x4	$1, %ymm8, %zmm6, %zmm6
	LONG $0x487ef262; WORD $0xff33             // vpmovdw	%zmm7, %ymm7
	LONG $0x487ef262; WORD $0xed33             // vpmovdw	%zmm5, %ymm5
	LONG $0x48c5f362; WORD $0xed3a; BYTE $0x01 // vinserti64x4	$1, %ymm5, %zmm7, %zmm5
	LONG $0x48d5f162; WORD $0xeceb             // vporq	%zmm4, %zmm5, %zmm5
	LONG $0x49fff162; WORD $0xf56f             // vmovdqu16	%zmm5, %zmm6 {%k1}
	LONG $0x48fe9162; WORD $0x347f; BYTE $0x63 // vmovdqu64	%zmm6, (%r11,%r12,2)
	LONG $0x20c48349                           // addq	$32, %r12
	WORD $0x394d; BYTE $0xe2                   // cmpq	%r12, %r10
	JNE  BB6_14
	WORD $0x394d; BYTE $0xd0                   // cmpq	%r10, %r8
	JE   BB6_22
	LONG $0x18c0f641                           // testb	$24, %r8b
	JE   BB6_17

BB6_8:
	WORD $0x894c; BYTE $0xc3             // movq	%r8, %rbx
	LONG $0xf8e38348                     // andq	$-8, %rbx
	LONG $0x191c8d4d                     // leaq	(%r9,%rbx), %r11
	LONG $0x49348d4e                     // leaq	(%rcx,%r9,2), %r14
	LONG $0x4a3c8d4e                     // leaq	(%rdx,%r9,2), %r15
	LONG $0x4e248d4e                     // leaq	(%rsi,%r9,2), %r12
	QUAD $0x00017805187de2c4; BYTE $0x00 // vbroadcastss	LCPI6_1(%rip), %ymm0    ## ymm0 = [NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN]
	QUAD $0x0001730d587de2c4; BYTE $0x00 // vpbroadcastd	LCPI6_2(%rip), %ymm1    ## ymm1 = [2139095040,2139095040,2139095040,2139095040,2139095040,2139095040,2139095040,2139095040]
	QUAD $0x00016e15587de2c4; BYTE $0x00 // vpbroadcastd	LCPI6_3(%rip), %ymm2    ## ymm2 = [1,1,1,1,1,1,1,1]
	LONG $0x4f0c8d4e                     // leaq	(%rdi,%r9,2), %r9
	QUAD $0x0001651d587de2c4; BYTE $0x00 // vpbroadcastd	LCPI6_4(%rip), %ymm3    ## ymm3 = [32767,32767,32767,32767,32767,32767,32767,32767]
	QUAD $0x000004a1256ff9c5             // vmovdqa	LCPI6_6(%rip), %xmm4            ## xmm4 = [64,64,64,64,64,64,64,64]

BB6_9:
	LONG $0x337d82c4; WORD $0x512c // vpmovzxwd	(%r9,%r10,2), %ymm5     ## ymm5 = mem[0],zero,mem[1],zero,mem[2],zero,mem[3],zero,mem[4],zero,mem[5],zero,mem[6],zero,mem[7],zero
	LONG $0x337d82c4; WORD $0x5434 // vpmovzxwd	(%r12,%r10,2), %ymm6    ## ymm6 = mem[0],zero,mem[1],zero,mem[2],zero,mem[3],zero,mem[4],zero,mem[5],zero,mem[6],zero,mem[7],zero
	LONG $0xf572d5c5; BYTE $0x10   // vpslld	$16, %ymm5, %ymm5
	LONG $0xf672cdc5; BYTE $0x10   // vpslld	$16, %ymm6, %ymm6
	LONG $0x337d82c4; WORD $0x573c // vpmovzxwd	(%r15,%r10,2), %ymm7    ## ymm7 = mem[0],zero,mem[1],zero,mem[2],zero,mem[3],zero,mem[4],zero,mem[5],zero,mem[6],zero,mem[7],zero
	LONG $0xf772c5c5; BYTE $0x10   // vpslld	$16, %ymm7, %ymm7
	LONG $0xb855e2c4; BYTE $0xfe   // vfmadd231ps	%ymm6, %ymm5, %ymm7     ## ymm7 = (ymm5 * ymm6) + ymm7
	LONG $0xe854c4c5               // vandps	%ymm0, %ymm7, %ymm5
	LONG $0x2855f162; WORD $0xc966 // vpcmpgtd	%ymm1, %ymm5, %k1
	LONG $0xd772d5c5; BYTE $0x10   // vpsrld	$16, %ymm7, %ymm5
	LONG $0xf2dbd5c5               // vpand	%ymm2, %ymm5, %ymm6
	LONG $0xf6fec5c5               // vpaddd	%ymm6, %ymm7, %ymm6
	LONG $0xf3fecdc5               // vpaddd	%ymm3, %ymm6, %ymm6
	LONG $0xd672cdc5; BYTE $0x10   // vpsrld	$16, %ymm6, %ymm6
	LONG $0x287ef262; WORD $0xf633 // vpmovdw	%ymm6, %xmm6
	LONG $0x287ef262; WORD $0xed33 // vpmovdw	%ymm5, %xmm5
	LONG $0xecebd1c5               // vpor	%xmm4, %xmm5, %xmm5
	LONG $0x09fff162; WORD $0xf56f // vmovdqu16	%xmm5, %xmm6 {%k1}
	LONG $0x7f7a81c4; WORD $0x5634 // vmovdqu	%xmm6, (%r14,%r10,2)
	LONG $0x08c28349               // addq	$8, %r10
	WORD $0x394c; BYTE $0xd3       // cmpq	%r10, %rbx
	JNE  BB6_9
	WORD $0x3949; BYTE $0xd8       // cmpq	%rbx, %r8
	JNE  BB6_11
	JMP  BB6_22

BB6_17:
	WORD $0x014d; BYTE $0xd1 // addq	%r10, %r9
	WORD $0x894d; BYTE $0xcb // movq	%r9, %r11
	JMP  BB6_11

BB6_12:
	LONG $0x40c88341             // orl	$64, %r8d
	LONG $0x04894666; BYTE $0x59 // movw	%r8w, (%rcx,%r11,2)
	WORD $0xff49; BYTE $0xc3     // incq	%r11
	WORD $0x394c; BYTE $0xd8     // cmpq	%r11, %rax
	JE   BB6_22

BB6_11:
	LONG $0x04b70f46; BYTE $0x5f               // movzwl	(%rdi,%r11,2), %r8d
	LONG $0x10e0c141                           // shll	$16, %r8d
	LONG $0x6e79c1c4; BYTE $0xc0               // vmovd	%r8d, %xmm0
	LONG $0x04b70f46; BYTE $0x5e               // movzwl	(%rsi,%r11,2), %r8d
	LONG $0x10e0c141                           // shll	$16, %r8d
	LONG $0x6e79c1c4; BYTE $0xc8               // vmovd	%r8d, %xmm1
	LONG $0x04b70f46; BYTE $0x5a               // movzwl	(%rdx,%r11,2), %r8d
	LONG $0x10e0c141                           // shll	$16, %r8d
	LONG $0x6e79c1c4; BYTE $0xd0               // vmovd	%r8d, %xmm2
	LONG $0xb979e2c4; BYTE $0xd1               // vfmadd231ss	%xmm1, %xmm0, %xmm2     ## xmm2 = (xmm0 * xmm1) + xmm2
	LONG $0x7e79c1c4; BYTE $0xd1               // vmovd	%xmm2, %r9d
	WORD $0x8945; BYTE $0xca                   // movl	%r9d, %r10d
	LONG $0xffe28141; WORD $0xffff; BYTE $0x7f // andl	$2147483647, %r10d              ## imm = 0x7FFFFFFF
	WORD $0x8945; BYTE $0xc8                   // movl	%r9d, %r8d
	LONG $0x10e8c141                           // shrl	$16, %r8d
	LONG $0x01fa8141; WORD $0x8000; BYTE $0x7f // cmpl	$2139095041, %r10d              ## imm = 0x7F800001
	JAE  BB6_12
	LONG $0x01e08341                           // andl	$1, %r8d
	WORD $0x0145; BYTE $0xc8                   // addl	%r9d, %r8d
	LONG $0xffc08141; WORD $0x007f; BYTE $0x00 // addl	$32767, %r8d                    ## imm = 0x7FFF
	LONG $0x10e8c141                           // shrl	$16, %r8d
	LONG $0x04894666; BYTE $0x59               // movw	%r8w, (%rcx,%r11,2)
	WORD $0xff49; BYTE $0xc3                   // incq	%r11
	WORD $0x394c; BYTE $0xd8                   // cmpq	%r11, %rax
	JNE  BB6_11

BB6_22:
	BYTE $0x5b               // popq	%rbx
	WORD $0x5c41             // popq	%r12
	WORD $0x5e41             // popq	%r14
	WORD $0x5f41             // popq	%r15
	WORD $0xf8c5; BYTE $0x77 // vzeroupper
	RET
