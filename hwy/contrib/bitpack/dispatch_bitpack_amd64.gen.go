// Code generated by hwygen. DO NOT EDIT.
//go:build amd64 && goexperiment.simd

package bitpack

import (
	"os"
	"simd/archsimd"
)

var Pack32 func(src []uint32, bitWidth int, dst []byte) int
var Unpack32 func(src []byte, bitWidth int, dst []uint32) int
var Pack64 func(src []uint64, bitWidth int, dst []byte) int
var Unpack64 func(src []byte, bitWidth int, dst []uint64) int
var DeltaEncode32 func(src []uint32, base uint32, dst []uint32)
var DeltaEncode64 func(src []uint64, base uint64, dst []uint64)

func init() {
	if os.Getenv("HWY_NO_SIMD") != "" {
		initBitpackFallback()
		return
	}
	if archsimd.X86.AVX2() {
		initBitpackAVX2()
		return
	}
	if archsimd.X86.AVX512() {
		initBitpackAVX512()
		return
	}
	initBitpackFallback()
}

func initBitpackAVX2() {
	Pack32 = BasePack32_avx2
	Unpack32 = BaseUnpack32_avx2
	Pack64 = BasePack64_avx2
	Unpack64 = BaseUnpack64_avx2
	DeltaEncode32 = BaseDeltaEncode32_avx2
	DeltaEncode64 = BaseDeltaEncode64_avx2
}

func initBitpackAVX512() {
	Pack32 = BasePack32_avx512
	Unpack32 = BaseUnpack32_avx512
	Pack64 = BasePack64_avx512
	Unpack64 = BaseUnpack64_avx512
	DeltaEncode32 = BaseDeltaEncode32_avx512
	DeltaEncode64 = BaseDeltaEncode64_avx512
}

func initBitpackFallback() {
	Pack32 = BasePack32_fallback
	Unpack32 = BaseUnpack32_fallback
	Pack64 = BasePack64_fallback
	Unpack64 = BaseUnpack64_fallback
	DeltaEncode32 = BaseDeltaEncode32_fallback
	DeltaEncode64 = BaseDeltaEncode64_fallback
}
