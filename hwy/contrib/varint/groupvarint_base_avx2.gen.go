// Code generated by github.com/ajroetker/go-highway/cmd/hwygen. DO NOT EDIT.

//go:build amd64 && goexperiment.simd

package varint

import (
	"github.com/ajroetker/go-highway/hwy"
	"simd/archsimd"
)

func BaseDecodeGroupVarint32_avx2(src []byte) (values [4]uint32, consumed int) {
	if len(src) < 1 {
		return [4]uint32{}, 0
	}
	control := src[0]
	totalLen := int(groupVarint32TotalLen[control])
	if len(src) < totalLen {
		return [4]uint32{}, 0
	}
	if len(src) >= 17 {
		dataVec := archsimd.LoadUint8x16Slice(src[1:17])
		maskSlice := groupVarint32ShuffleMasks[control][:]
		maskVec := archsimd.LoadUint8x16Slice(maskSlice)
		shuffled := hwy.TableLookupBytes_AVX2_Uint8x16(dataVec, maskVec)
		var result [16]uint8
		shuffled.StoreSlice(result[:])
		values[0] = uint32(result[0]) | uint32(result[1])<<8 | uint32(result[2])<<16 | uint32(result[3])<<24
		values[1] = uint32(result[4]) | uint32(result[5])<<8 | uint32(result[6])<<16 | uint32(result[7])<<24
		values[2] = uint32(result[8]) | uint32(result[9])<<8 | uint32(result[10])<<16 | uint32(result[11])<<24
		values[3] = uint32(result[12]) | uint32(result[13])<<8 | uint32(result[14])<<16 | uint32(result[15])<<24
		return values, totalLen
	}
	offsets := groupVarint32Offsets[control]
	values[0] = decodeValue32(src, int(offsets[0]), ((int(control)>>0)&0x3)+1)
	values[1] = decodeValue32(src, int(offsets[1]), ((int(control)>>2)&0x3)+1)
	values[2] = decodeValue32(src, int(offsets[2]), ((int(control)>>4)&0x3)+1)
	values[3] = decodeValue32(src, int(offsets[3]), ((int(control)>>6)&0x3)+1)
	return values, totalLen
}
