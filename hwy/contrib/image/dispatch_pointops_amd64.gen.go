// Code generated by hwygen. DO NOT EDIT.
//go:build amd64 && goexperiment.simd

package image

import (
	"os"

	"github.com/ajroetker/go-highway/hwy"
	"simd/archsimd"
)

var BrightnessContrastFloat32 func(img *Image[float32], out *Image[float32], scale float32, offset float32)
var BrightnessContrastFloat64 func(img *Image[float64], out *Image[float64], scale float64, offset float64)
var ClampImageFloat32 func(img *Image[float32], out *Image[float32], minVal float32, maxVal float32)
var ClampImageFloat64 func(img *Image[float64], out *Image[float64], minVal float64, maxVal float64)
var ThresholdFloat32 func(img *Image[float32], out *Image[float32], threshold float32, below float32, above float32)
var ThresholdFloat64 func(img *Image[float64], out *Image[float64], threshold float64, below float64, above float64)
var InvertFloat32 func(img *Image[float32], out *Image[float32], maxVal float32)
var InvertFloat64 func(img *Image[float64], out *Image[float64], maxVal float64)
var AbsFloat32 func(img *Image[float32], out *Image[float32])
var AbsFloat64 func(img *Image[float64], out *Image[float64])
var ScaleFloat32 func(img *Image[float32], out *Image[float32], scale float32)
var ScaleFloat64 func(img *Image[float64], out *Image[float64], scale float64)
var OffsetFloat32 func(img *Image[float32], out *Image[float32], offset float32)
var OffsetFloat64 func(img *Image[float64], out *Image[float64], offset float64)
var GammaFloat32 func(img *Image[float32], out *Image[float32], gamma float32)
var GammaFloat64 func(img *Image[float64], out *Image[float64], gamma float64)
var MinImageFloat32 func(a *Image[float32], b *Image[float32], out *Image[float32])
var MinImageFloat64 func(a *Image[float64], b *Image[float64], out *Image[float64])
var MaxImageFloat32 func(a *Image[float32], b *Image[float32], out *Image[float32])
var MaxImageFloat64 func(a *Image[float64], b *Image[float64], out *Image[float64])

// BrightnessContrast is the generic API that dispatches to the appropriate SIMD implementation.
func BrightnessContrast[T hwy.Floats](img *Image[T], out *Image[T], scale T, offset T) {
	switch any(img).(type) {
	case *Image[float32]:
		BrightnessContrastFloat32(any(img).(*Image[float32]), any(out).(*Image[float32]), any(scale).(float32), any(offset).(float32))
	case *Image[float64]:
		BrightnessContrastFloat64(any(img).(*Image[float64]), any(out).(*Image[float64]), any(scale).(float64), any(offset).(float64))
	}
}

// ClampImage is the generic API that dispatches to the appropriate SIMD implementation.
func ClampImage[T hwy.Floats](img *Image[T], out *Image[T], minVal T, maxVal T) {
	switch any(img).(type) {
	case *Image[float32]:
		ClampImageFloat32(any(img).(*Image[float32]), any(out).(*Image[float32]), any(minVal).(float32), any(maxVal).(float32))
	case *Image[float64]:
		ClampImageFloat64(any(img).(*Image[float64]), any(out).(*Image[float64]), any(minVal).(float64), any(maxVal).(float64))
	}
}

// Threshold is the generic API that dispatches to the appropriate SIMD implementation.
func Threshold[T hwy.Floats](img *Image[T], out *Image[T], threshold T, below T, above T) {
	switch any(img).(type) {
	case *Image[float32]:
		ThresholdFloat32(any(img).(*Image[float32]), any(out).(*Image[float32]), any(threshold).(float32), any(below).(float32), any(above).(float32))
	case *Image[float64]:
		ThresholdFloat64(any(img).(*Image[float64]), any(out).(*Image[float64]), any(threshold).(float64), any(below).(float64), any(above).(float64))
	}
}

// Invert is the generic API that dispatches to the appropriate SIMD implementation.
func Invert[T hwy.Floats](img *Image[T], out *Image[T], maxVal T) {
	switch any(img).(type) {
	case *Image[float32]:
		InvertFloat32(any(img).(*Image[float32]), any(out).(*Image[float32]), any(maxVal).(float32))
	case *Image[float64]:
		InvertFloat64(any(img).(*Image[float64]), any(out).(*Image[float64]), any(maxVal).(float64))
	}
}

// Abs is the generic API that dispatches to the appropriate SIMD implementation.
func Abs[T hwy.Floats](img *Image[T], out *Image[T]) {
	switch any(img).(type) {
	case *Image[float32]:
		AbsFloat32(any(img).(*Image[float32]), any(out).(*Image[float32]))
	case *Image[float64]:
		AbsFloat64(any(img).(*Image[float64]), any(out).(*Image[float64]))
	}
}

// Scale is the generic API that dispatches to the appropriate SIMD implementation.
func Scale[T hwy.Floats](img *Image[T], out *Image[T], scale T) {
	switch any(img).(type) {
	case *Image[float32]:
		ScaleFloat32(any(img).(*Image[float32]), any(out).(*Image[float32]), any(scale).(float32))
	case *Image[float64]:
		ScaleFloat64(any(img).(*Image[float64]), any(out).(*Image[float64]), any(scale).(float64))
	}
}

// Offset is the generic API that dispatches to the appropriate SIMD implementation.
func Offset[T hwy.Floats](img *Image[T], out *Image[T], offset T) {
	switch any(img).(type) {
	case *Image[float32]:
		OffsetFloat32(any(img).(*Image[float32]), any(out).(*Image[float32]), any(offset).(float32))
	case *Image[float64]:
		OffsetFloat64(any(img).(*Image[float64]), any(out).(*Image[float64]), any(offset).(float64))
	}
}

// Gamma is the generic API that dispatches to the appropriate SIMD implementation.
func Gamma[T hwy.Floats](img *Image[T], out *Image[T], gamma T) {
	switch any(img).(type) {
	case *Image[float32]:
		GammaFloat32(any(img).(*Image[float32]), any(out).(*Image[float32]), any(gamma).(float32))
	case *Image[float64]:
		GammaFloat64(any(img).(*Image[float64]), any(out).(*Image[float64]), any(gamma).(float64))
	}
}

// MinImage is the generic API that dispatches to the appropriate SIMD implementation.
func MinImage[T hwy.Floats](a *Image[T], b *Image[T], out *Image[T]) {
	switch any(a).(type) {
	case *Image[float32]:
		MinImageFloat32(any(a).(*Image[float32]), any(b).(*Image[float32]), any(out).(*Image[float32]))
	case *Image[float64]:
		MinImageFloat64(any(a).(*Image[float64]), any(b).(*Image[float64]), any(out).(*Image[float64]))
	}
}

// MaxImage is the generic API that dispatches to the appropriate SIMD implementation.
func MaxImage[T hwy.Floats](a *Image[T], b *Image[T], out *Image[T]) {
	switch any(a).(type) {
	case *Image[float32]:
		MaxImageFloat32(any(a).(*Image[float32]), any(b).(*Image[float32]), any(out).(*Image[float32]))
	case *Image[float64]:
		MaxImageFloat64(any(a).(*Image[float64]), any(b).(*Image[float64]), any(out).(*Image[float64]))
	}
}

func init() {
	if os.Getenv("HWY_NO_SIMD") != "" {
		initPointopsFallback()
		return
	}
	if archsimd.X86.AVX2() {
		initPointopsAVX2()
		return
	}
	if archsimd.X86.AVX512() {
		initPointopsAVX512()
		return
	}
	initPointopsFallback()
}

func initPointopsAVX2() {
	BrightnessContrastFloat32 = BaseBrightnessContrast_avx2
	BrightnessContrastFloat64 = BaseBrightnessContrast_avx2_Float64
	ClampImageFloat32 = BaseClampImage_avx2
	ClampImageFloat64 = BaseClampImage_avx2_Float64
	ThresholdFloat32 = BaseThreshold_avx2
	ThresholdFloat64 = BaseThreshold_avx2_Float64
	InvertFloat32 = BaseInvert_avx2
	InvertFloat64 = BaseInvert_avx2_Float64
	AbsFloat32 = BaseAbs_avx2
	AbsFloat64 = BaseAbs_avx2_Float64
	ScaleFloat32 = BaseScale_avx2
	ScaleFloat64 = BaseScale_avx2_Float64
	OffsetFloat32 = BaseOffset_avx2
	OffsetFloat64 = BaseOffset_avx2_Float64
	GammaFloat32 = BaseGamma_avx2
	GammaFloat64 = BaseGamma_avx2_Float64
	MinImageFloat32 = BaseMinImage_avx2
	MinImageFloat64 = BaseMinImage_avx2_Float64
	MaxImageFloat32 = BaseMaxImage_avx2
	MaxImageFloat64 = BaseMaxImage_avx2_Float64
}

func initPointopsAVX512() {
	BrightnessContrastFloat32 = BaseBrightnessContrast_avx512
	BrightnessContrastFloat64 = BaseBrightnessContrast_avx512_Float64
	ClampImageFloat32 = BaseClampImage_avx512
	ClampImageFloat64 = BaseClampImage_avx512_Float64
	ThresholdFloat32 = BaseThreshold_avx512
	ThresholdFloat64 = BaseThreshold_avx512_Float64
	InvertFloat32 = BaseInvert_avx512
	InvertFloat64 = BaseInvert_avx512_Float64
	AbsFloat32 = BaseAbs_avx512
	AbsFloat64 = BaseAbs_avx512_Float64
	ScaleFloat32 = BaseScale_avx512
	ScaleFloat64 = BaseScale_avx512_Float64
	OffsetFloat32 = BaseOffset_avx512
	OffsetFloat64 = BaseOffset_avx512_Float64
	GammaFloat32 = BaseGamma_avx512
	GammaFloat64 = BaseGamma_avx512_Float64
	MinImageFloat32 = BaseMinImage_avx512
	MinImageFloat64 = BaseMinImage_avx512_Float64
	MaxImageFloat32 = BaseMaxImage_avx512
	MaxImageFloat64 = BaseMaxImage_avx512_Float64
}

func initPointopsFallback() {
	BrightnessContrastFloat32 = BaseBrightnessContrast_fallback
	BrightnessContrastFloat64 = BaseBrightnessContrast_fallback_Float64
	ClampImageFloat32 = BaseClampImage_fallback
	ClampImageFloat64 = BaseClampImage_fallback_Float64
	ThresholdFloat32 = BaseThreshold_fallback
	ThresholdFloat64 = BaseThreshold_fallback_Float64
	InvertFloat32 = BaseInvert_fallback
	InvertFloat64 = BaseInvert_fallback_Float64
	AbsFloat32 = BaseAbs_fallback
	AbsFloat64 = BaseAbs_fallback_Float64
	ScaleFloat32 = BaseScale_fallback
	ScaleFloat64 = BaseScale_fallback_Float64
	OffsetFloat32 = BaseOffset_fallback
	OffsetFloat64 = BaseOffset_fallback_Float64
	GammaFloat32 = BaseGamma_fallback
	GammaFloat64 = BaseGamma_fallback_Float64
	MinImageFloat32 = BaseMinImage_fallback
	MinImageFloat64 = BaseMinImage_fallback_Float64
	MaxImageFloat32 = BaseMaxImage_fallback
	MaxImageFloat64 = BaseMaxImage_fallback_Float64
}
