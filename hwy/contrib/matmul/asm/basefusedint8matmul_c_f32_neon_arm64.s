//go:build !noasm && arm64
// Code generated by GoAT. DO NOT EDIT.
// versions:
// 	clang   21.1.8
// 	objdump 2.45.1
// flags: -march=armv8-a+simd+fp -fno-builtin-memset -O3
// source: /Users/ajroetker/go/src/github.com/ajroetker/go-highway/hwy/contrib/matmul/asm/basefusedint8matmul_c_f32_neon_arm64.c

#include "textflag.h"

// Constant pool data
DATA CPI0_0<>+0(SB)/4, $0x00ffffff
DATA CPI0_0<>+4(SB)/4, $0x01ffffff
DATA CPI0_0<>+8(SB)/4, $0x02ffffff
DATA CPI0_0<>+12(SB)/4, $0x03ffffff
GLOBL CPI0_0<>(SB), (RODATA|NOPTR), $16

TEXT Â·fusedint8matmul_c_f32_neon(SB), $80-64
	MOVD input+0(FP), R0
	MOVD weights+8(FP), R1
	MOVD scales+16(FP), R2
	MOVD output+24(FP), R3
	MOVD pM+32(FP), R4
	MOVD pK+40(FP), R5
	MOVD pN+48(FP), R6
	MOVD pgroupSize+56(FP), R7
	WORD $0xf80003f9           // str	x25, [sp, #-80]!                ; 8-byte Folded Spill [transformed]
	WORD $0xa9015ff8           // stp	x24, x23, [sp, #16]             ; 16-byte Folded Spill
	WORD $0xa90257f6           // stp	x22, x21, [sp, #32]             ; 16-byte Folded Spill
	WORD $0xa9034ff4           // stp	x20, x19, [sp, #48]             ; 16-byte Folded Spill
	WORD $0xa9047bfd           // stp	x29, x30, [sp, #64]             ; 16-byte Folded Spill
	WORD $0xf90007e1           // str	x1, [sp, #8]                    ; 8-byte Folded Spill
	WORD $0xf94000aa           // ldr	x10, [x5]
	WORD $0xf9400088           // ldr	x8, [x4]
	WORD $0xf94000c9           // ldr	x9, [x6]
	WORD $0xf100011f           // cmp	x8, #0
	WORD $0xfa401944           // ccmp	x10, #0, #4, ne
	WORD $0xfa401924           // ccmp	x9, #0, #4, ne
	BEQ  BB0_27
	WORD $0xf100051f           // cmp	x8, #1
	BLT  BB0_27
	WORD $0xf94000eb           // ldr	x11, [x7]
	WORD $0x8b0b012c           // add	x12, x9, x11
	WORD $0xd100058c           // sub	x12, x12, #1
	WORD $0x9acb0d91           // sdiv	x17, x12, x11
	WORD $0xf1000d3f           // cmp	x9, #3
	BGT  BB0_16
	WORD $0xf100053f           // cmp	x9, #1
	BLT  BB0_27
	WORD $0xf100015f           // cmp	x10, #0
	BLE  BB0_35
	WORD $0xd280000c           // mov	x12, #0                         ; =0x0
	WORD $0x9100056d           // add	x13, x11, #1
	WORD $0xf1000dbf           // cmp	x13, #3
	WORD $0x9a9f316e           // csel	x14, x11, xzr, lo
	WORD $0xf94007ef           // ldr	x15, [sp, #8]                   ; 8-byte Folded Reload
	WORD $0x910005ed           // add	x13, x15, #1
	WORD $0x8b0e084e           // add	x14, x2, x14, lsl #2
	WORD $0x910009ef           // add	x15, x15, #2
	WORD $0xd37ef550           // lsl	x16, x10, #2
	WORD $0xd37ef631           // lsl	x17, x17, #2
	WORD $0x52800044           // mov	w4, #2                          ; =0x2
	WORD $0x9acb0c8b           // sdiv	x11, x4, x11
	WORD $0x8b0b084b           // add	x11, x2, x11, lsl #2
	B    BB0_7

BB0_6:
	WORD $0x9100058c // add	x12, x12, #1
	WORD $0x8b100000 // add	x0, x0, x16
	WORD $0xeb08019f // cmp	x12, x8
	BEQ  BB0_27

BB0_7:
	WORD $0xd2800005 // mov	x5, #0                          ; =0x0
	WORD $0x9b097d84 // mul	x4, x12, x9
	WORD $0x8b040864 // add	x4, x3, x4, lsl #2
	WORD $0x2f00e400 // movi	d0, #0000000000000000
	WORD $0xf94007e6 // ldr	x6, [sp, #8]                    ; 8-byte Folded Reload
	WORD $0xaa0203e7 // mov	x7, x2

BB0_8:
	WORD $0x3d4000c1 // ldr	b1, [x6]
	WORD $0x0f08a421 // sshll.8h	v1, v1, #0
	WORD $0x0f10a421 // sshll.4s	v1, v1, #0
	WORD $0x5e21d821 // scvtf	s1, s1
	WORD $0xbd4000e2 // ldr	s2, [x7]
	WORD $0xbc657803 // ldr	s3, [x0, x5, lsl #2]
	WORD $0x1e210841 // fmul	s1, s2, s1
	WORD $0x1f010060 // fmadd	s0, s3, s1, s0
	WORD $0x910004a5 // add	x5, x5, #1
	WORD $0x8b1100e7 // add	x7, x7, x17
	WORD $0x8b0900c6 // add	x6, x6, x9
	WORD $0xeb05015f // cmp	x10, x5
	BNE  BB0_8
	WORD $0xbd000080 // str	s0, [x4]
	WORD $0xf100053f // cmp	x9, #1
	BEQ  BB0_6
	WORD $0xd2800005 // mov	x5, #0                          ; =0x0
	WORD $0x2f00e400 // movi	d0, #0000000000000000
	WORD $0xaa0d03e6 // mov	x6, x13
	WORD $0xaa0e03e7 // mov	x7, x14

BB0_11:
	WORD $0x3d4000c1 // ldr	b1, [x6]
	WORD $0x0f08a421 // sshll.8h	v1, v1, #0
	WORD $0x0f10a421 // sshll.4s	v1, v1, #0
	WORD $0x5e21d821 // scvtf	s1, s1
	WORD $0xbd4000e2 // ldr	s2, [x7]
	WORD $0xbc657803 // ldr	s3, [x0, x5, lsl #2]
	WORD $0x1e210841 // fmul	s1, s2, s1
	WORD $0x1f010060 // fmadd	s0, s3, s1, s0
	WORD $0x910004a5 // add	x5, x5, #1
	WORD $0x8b1100e7 // add	x7, x7, x17
	WORD $0x8b0900c6 // add	x6, x6, x9
	WORD $0xeb05015f // cmp	x10, x5
	BNE  BB0_11
	WORD $0xbd000480 // str	s0, [x4, #4]
	WORD $0xf100093f // cmp	x9, #2
	BEQ  BB0_6
	WORD $0xd2800005 // mov	x5, #0                          ; =0x0
	WORD $0x2f00e400 // movi	d0, #0000000000000000
	WORD $0xaa0f03e6 // mov	x6, x15
	WORD $0xaa0b03e7 // mov	x7, x11

BB0_14:
	WORD $0x3d4000c1 // ldr	b1, [x6]
	WORD $0x0f08a421 // sshll.8h	v1, v1, #0
	WORD $0x0f10a421 // sshll.4s	v1, v1, #0
	WORD $0x5e21d821 // scvtf	s1, s1
	WORD $0xbd4000e2 // ldr	s2, [x7]
	WORD $0xbc657803 // ldr	s3, [x0, x5, lsl #2]
	WORD $0x1e210841 // fmul	s1, s2, s1
	WORD $0x1f010060 // fmadd	s0, s3, s1, s0
	WORD $0x910004a5 // add	x5, x5, #1
	WORD $0x8b1100e7 // add	x7, x7, x17
	WORD $0x8b0900c6 // add	x6, x6, x9
	WORD $0xeb05015f // cmp	x10, x5
	BNE  BB0_14
	WORD $0xbd000880 // str	s0, [x4, #8]
	B    BB0_6

BB0_16:
	WORD $0xf100015f        // cmp	x10, #0
	BLE  BB0_28
	WORD $0xd280000c        // mov	x12, #0                         ; =0x0
	WORD $0xd37ef62d        // lsl	x13, x17, #2
	WORD $0xd37ef541        // lsl	x1, x10, #2
	MOVD $CPI0_0<>(SB), R15
	VLD1 (R15), [V0.B16]
	WORD $0xf94007ee        // ldr	x14, [sp, #8]                   ; 8-byte Folded Reload
	WORD $0x910011cf        // add	x15, x14, #4

BB0_18:
	WORD $0xd2800006 // mov	x6, #0                          ; =0x0
	WORD $0x9b097d90 // mul	x16, x12, x9
	WORD $0x8b100870 // add	x16, x3, x16, lsl #2
	WORD $0xaa0f03f3 // mov	x19, x15
	WORD $0xf94007e5 // ldr	x5, [sp, #8]                    ; 8-byte Folded Reload
	WORD $0x52800094 // mov	w20, #4                         ; =0x4

BB0_19:
	WORD $0xd2800007 // mov	x7, #0                          ; =0x0
	WORD $0xaa1403f1 // mov	x17, x20
	WORD $0xaa1303e4 // mov	x4, x19
	WORD $0x9acb0cd3 // sdiv	x19, x6, x11
	WORD $0xb24000d4 // orr	x20, x6, #0x1
	WORD $0x9acb0e94 // sdiv	x20, x20, x11
	WORD $0xb27f00d5 // orr	x21, x6, #0x2
	WORD $0x9acb0eb5 // sdiv	x21, x21, x11
	WORD $0xb24004d8 // orr	x24, x6, #0x3
	WORD $0x6f00e401 // movi.2d	v1, #0000000000000000
	WORD $0xaa0503f6 // mov	x22, x5
	WORD $0xaa0203f7 // mov	x23, x2
	WORD $0x9acb0f18 // sdiv	x24, x24, x11

BB0_20:
	WORD $0xbc677802 // ldr	s2, [x0, x7, lsl #2]
	WORD $0x8b140af9 // add	x25, x23, x20, lsl #2
	WORD $0x8b150afe // add	x30, x23, x21, lsl #2
	WORD $0x8b180aee // add	x14, x23, x24, lsl #2
	WORD $0xbd4002c3 // ldr	s3, [x22]
	WORD $0x4e000063 // tbl.16b	v3, { v3 }, v0
	WORD $0x4f28e463 // scvtf.4s	v3, v3, #24
	WORD $0xbc737ae4 // ldr	s4, [x23, x19, lsl #2]
	WORD $0x0d409324 // ld1.s	{ v4 }[1], [x25]
	WORD $0x4d4083c4 // ld1.s	{ v4 }[2], [x30]
	WORD $0x4d4091c4 // ld1.s	{ v4 }[3], [x14]
	WORD $0x6e23dc83 // fmul.4s	v3, v4, v3
	WORD $0x4f821061 // fmla.4s	v1, v3, v2[0]
	WORD $0x910004e7 // add	x7, x7, #1
	WORD $0x8b0d02f7 // add	x23, x23, x13
	WORD $0x8b0902d6 // add	x22, x22, x9
	WORD $0xeb07015f // cmp	x10, x7
	BNE  BB0_20
	WORD $0xd37ef4ce // lsl	x14, x6, #2
	WORD $0x3cae6a01 // str	q1, [x16, x14]
	WORD $0x91001234 // add	x20, x17, #4
	WORD $0x910010a5 // add	x5, x5, #4
	WORD $0x91001093 // add	x19, x4, #4
	WORD $0xaa1103e6 // mov	x6, x17
	WORD $0xeb09029f // cmp	x20, x9
	BLE  BB0_19
	B    BB0_25

BB0_22:
	WORD $0xd2800005 // mov	x5, #0                          ; =0x0
	WORD $0x9acb0e2e // sdiv	x14, x17, x11
	WORD $0x8b0e0846 // add	x6, x2, x14, lsl #2
	WORD $0x2f00e401 // movi	d1, #0000000000000000
	WORD $0xaa0403e7 // mov	x7, x4

BB0_23:
	WORD $0x3d4000e2 // ldr	b2, [x7]
	WORD $0x0f08a442 // sshll.8h	v2, v2, #0
	WORD $0x0f10a442 // sshll.4s	v2, v2, #0
	WORD $0x5e21d842 // scvtf	s2, s2
	WORD $0xbd4000c3 // ldr	s3, [x6]
	WORD $0xbc657804 // ldr	s4, [x0, x5, lsl #2]
	WORD $0x1e220862 // fmul	s2, s3, s2
	WORD $0x1f020481 // fmadd	s1, s4, s2, s1
	WORD $0x910004a5 // add	x5, x5, #1
	WORD $0x8b0d00c6 // add	x6, x6, x13
	WORD $0x8b0900e7 // add	x7, x7, x9
	WORD $0xeb05015f // cmp	x10, x5
	BNE  BB0_23
	WORD $0xbc317a01 // str	s1, [x16, x17, lsl #2]
	WORD $0x91000631 // add	x17, x17, #1
	WORD $0x91000484 // add	x4, x4, #1

BB0_25:
	WORD $0xeb09023f // cmp	x17, x9
	BLT  BB0_22
	WORD $0x9100058c // add	x12, x12, #1
	WORD $0x8b010000 // add	x0, x0, x1
	WORD $0xeb08019f // cmp	x12, x8
	BNE  BB0_18

BB0_27:
	WORD $0xa9447bfd // ldp	x29, x30, [sp, #64]             ; 16-byte Folded Reload
	WORD $0xa9434ff4 // ldp	x20, x19, [sp, #48]             ; 16-byte Folded Reload
	WORD $0xa94257f6 // ldp	x22, x21, [sp, #32]             ; 16-byte Folded Reload
	WORD $0xa9415ff8 // ldp	x24, x23, [sp, #16]             ; 16-byte Folded Reload
	WORD $0xf84003f9 // ldr	x25, [sp], #80                  ; 8-byte Folded Reload [transformed]
	RET

BB0_28:
	WORD $0xd280000a // mov	x10, #0                         ; =0x0
	WORD $0xd37ef52b // lsl	x11, x9, #2
	B    BB0_30

BB0_29:
	WORD $0x9100054a // add	x10, x10, #1
	WORD $0x8b0b0063 // add	x3, x3, x11
	WORD $0xeb08015f // cmp	x10, x8
	BEQ  BB0_27

BB0_30:
	WORD $0xd280000e // mov	x14, #0                         ; =0x0
	WORD $0xaa0303ec // mov	x12, x3

BB0_31:
	WORD $0xa8817d9f // stp	xzr, xzr, [x12], #16
	WORD $0x910011cd // add	x13, x14, #4
	WORD $0x910021cf // add	x15, x14, #8
	WORD $0xaa0d03ee // mov	x14, x13
	WORD $0xeb0901ff // cmp	x15, x9
	BLE  BB0_31
	WORD $0xeb0901bf // cmp	x13, x9
	BGE  BB0_29
	WORD $0xd280000e // mov	x14, #0                         ; =0x0

BB0_34:
	WORD $0xb82e799f // str	wzr, [x12, x14, lsl #2]
	WORD $0x910005ce // add	x14, x14, #1
	WORD $0x8b0e01af // add	x15, x13, x14
	WORD $0xeb0901ff // cmp	x15, x9
	BLT  BB0_34
	B    BB0_29

BB0_35:
	WORD $0x9100206a // add	x10, x3, #8
	WORD $0xd37ef52b // lsl	x11, x9, #2
	B    BB0_37

BB0_36:
	WORD $0x8b0b014a // add	x10, x10, x11
	WORD $0xf1000508 // subs	x8, x8, #1
	BEQ  BB0_27

BB0_37:
	WORD $0xb81f815f // stur	wzr, [x10, #-8]
	WORD $0xf100053f // cmp	x9, #1
	BEQ  BB0_36
	WORD $0xb81fc15f // stur	wzr, [x10, #-4]
	WORD $0xf100093f // cmp	x9, #2
	BEQ  BB0_36
	WORD $0xb900015f // str	wzr, [x10]
	B    BB0_36
