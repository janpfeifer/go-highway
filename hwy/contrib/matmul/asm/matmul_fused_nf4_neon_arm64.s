//go:build !noasm && arm64
// Code generated by GoAT. DO NOT EDIT.
// versions:
// 	clang   21.1.8
// 	objdump 2.45.1
// flags: -O3
// source: ../c/matmul_fused_nf4_neon_arm64.c

TEXT ·fused_nf4_matmul_neon(SB), $80-72
	MOVD input+0(FP), R0
	MOVD packed+8(FP), R1
	MOVD scales+16(FP), R2
	MOVD output+24(FP), R3
	MOVD pM+32(FP), R4
	MOVD pK+40(FP), R5
	MOVD pN+48(FP), R6
	MOVD pGroupSize+56(FP), R7
	MOVD pNumGroups+64(FP), R8
	MOVD R8, 0(RSP)
	WORD $0xf9400088           // ldr	x8, [x4]
	WORD $0xf100051f           // cmp	x8, #1
	BLT  BB0_14
	WORD $0xf94000c9           // ldr	x9, [x6]
	WORD $0xf100053f           // cmp	x9, #1
	BLT  BB0_14
	WORD $0xf8000ffd           // str	x29, [sp, #-80]! [transformed]
	WORD $0xf94000aa           // ldr	x10, [x5]
	WORD $0xa90167fe           // stp	x30, x25, [sp, #16]
	WORD $0xa9025ff8           // stp	x24, x23, [sp, #32]
	WORD $0xf100015f           // cmp	x10, #0
	WORD $0xa90357f6           // stp	x22, x21, [sp, #48]
	WORD $0xa9044ff4           // stp	x20, x19, [sp, #64]
	BLE  BB0_9
	WORD $0xf9402bec           // ldr	x12, [sp, #80]
	WORD $0xd37ef54e           // lsl	x14, x10, #2
	WORD $0xaa1f03eb           // mov	x11, xzr
	WORD $0x9000000f           // adrp	x15, nf4_table
	WORD $0x910001ef           // add	x15, x15, :lo12:nf4_table
	WORD $0xf940018d           // ldr	x13, [x12]
	WORD $0xf94000ec           // ldr	x12, [x7]
	WORD $0xd37ef5ad           // lsl	x13, x13, #2

BB0_4:
	WORD $0x9b097d71 // mul	x17, x11, x9
	WORD $0xaa1f03f0 // mov	x16, xzr
	WORD $0x52800044 // mov	w4, #2
	WORD $0x8b110871 // add	x17, x3, x17, lsl #2

BB0_5:
	WORD $0xb2400206 // orr	x6, x16, #0x1
	WORD $0xb27f0207 // orr	x7, x16, #0x2
	WORD $0xb2400613 // orr	x19, x16, #0x3
	WORD $0x9acc0e05 // sdiv	x5, x16, x12
	WORD $0x6f00e400 // movi	v0.2d, #0000000000000000
	WORD $0xaa0003f4 // mov	x20, x0
	WORD $0xaa0403f5 // mov	x21, x4
	WORD $0xaa0203f6 // mov	x22, x2
	WORD $0xaa0a03f7 // mov	x23, x10
	WORD $0x9acc0cc6 // sdiv	x6, x6, x12
	WORD $0x9acc0ce7 // sdiv	x7, x7, x12
	WORD $0x9acc0e73 // sdiv	x19, x19, x12

BB0_6:
	WORD $0x8b55feb8 // add	x24, x21, x21, lsr #63
	WORD $0xd1000ab9 // sub	x25, x21, #2
	WORD $0xbc657ac1 // ldr	s1, [x22, x5, lsl #2]
	WORD $0xd341ff39 // lsr	x25, x25, #1
	WORD $0xbc667ac2 // ldr	s2, [x22, x6, lsl #2]
	WORD $0xbc677ac6 // ldr	s6, [x22, x7, lsl #2]
	WORD $0x9341ff18 // asr	x24, x24, #1
	WORD $0xf10006f7 // subs	x23, x23, #1
	WORD $0x8b0902b5 // add	x21, x21, x9
	WORD $0x38796839 // ldrb	w25, [x1, x25]
	WORD $0x38786838 // ldrb	w24, [x1, x24]
	WORD $0xd344ff3d // lsr	x29, x25, #4
	WORD $0x92400f39 // and	x25, x25, #0xf
	WORD $0xd344ff1e // lsr	x30, x24, #4
	WORD $0x92400f18 // and	x24, x24, #0xf
	WORD $0xbc7979e3 // ldr	s3, [x15, x25, lsl #2]
	WORD $0xbc7d79e4 // ldr	s4, [x15, x29, lsl #2]
	WORD $0x8b130add // add	x29, x22, x19, lsl #2
	WORD $0xbc7879e5 // ldr	s5, [x15, x24, lsl #2]
	WORD $0x8b1e09f9 // add	x25, x15, x30, lsl #2
	WORD $0x1e210861 // fmul	s1, s3, s1
	WORD $0x8b0d02d6 // add	x22, x22, x13
	WORD $0x1e220882 // fmul	s2, s4, s2
	WORD $0x0d4093a6 // ld1	{ v6.s }[1], [x29]
	WORD $0x0d409325 // ld1	{ v5.s }[1], [x25]
	WORD $0x2e26dca3 // fmul	v3.2s, v5.2s, v6.2s
	WORD $0x6e0c0441 // mov	v1.s[1], v2.s[0]
	WORD $0xbc404682 // ldr	s2, [x20], #4
	WORD $0x6e180461 // mov	v1.d[1], v3.d[0]
	WORD $0x4f821020 // fmla	v0.4s, v1.4s, v2.s[0]
	BNE  BB0_6
	WORD $0xd37ef605 // lsl	x5, x16, #2
	WORD $0x91001210 // add	x16, x16, #4
	WORD $0x91001084 // add	x4, x4, #4
	WORD $0xeb09021f // cmp	x16, x9
	WORD $0x3ca56a20 // str	q0, [x17, x5]
	BLT  BB0_5
	WORD $0x9100056b // add	x11, x11, #1
	WORD $0x8b0e0000 // add	x0, x0, x14
	WORD $0xeb08017f // cmp	x11, x8
	BNE  BB0_4
	B    BB0_13

BB0_9:
	WORD $0xd37ef52a // lsl	x10, x9, #2
	WORD $0xaa1f03eb // mov	x11, xzr

BB0_10:
	WORD $0xaa1f03ec // mov	x12, xzr
	WORD $0xaa0303ed // mov	x13, x3

BB0_11:
	WORD $0x9100118c // add	x12, x12, #4
	WORD $0xa8817dbf // stp	xzr, xzr, [x13], #16
	WORD $0xeb09019f // cmp	x12, x9
	BLT  BB0_11
	WORD $0x9100056b // add	x11, x11, #1
	WORD $0x8b0a0063 // add	x3, x3, x10
	WORD $0xeb08017f // cmp	x11, x8
	BNE  BB0_10

BB0_13:
	WORD $0xa9444ff4 // ldp	x20, x19, [sp, #64]
	WORD $0xa94357f6 // ldp	x22, x21, [sp, #48]
	WORD $0xa9425ff8 // ldp	x24, x23, [sp, #32]
	WORD $0xa94167fe // ldp	x30, x25, [sp, #16]
	WORD $0xf94007fd // ldr	x29, [sp], #80 [transformed]

BB0_14:
	RET

TEXT ·fused_int4_matmul_neon(SB), $64-72
	MOVD input+0(FP), R0
	MOVD packed+8(FP), R1
	MOVD scales+16(FP), R2
	MOVD output+24(FP), R3
	MOVD pM+32(FP), R4
	MOVD pK+40(FP), R5
	MOVD pN+48(FP), R6
	MOVD pGroupSize+56(FP), R7
	MOVD pNumGroups+64(FP), R8
	MOVD R8, 0(RSP)
	WORD $0xf9400088           // ldr	x8, [x4]
	WORD $0xf100051f           // cmp	x8, #1
	BLT  BB1_14
	WORD $0xf94000c9           // ldr	x9, [x6]
	WORD $0xf100053f           // cmp	x9, #1
	BLT  BB1_14
	WORD $0xf8000ff9           // str	x25, [sp, #-64]! [transformed]
	WORD $0xf94000aa           // ldr	x10, [x5]
	WORD $0xa9015ff8           // stp	x24, x23, [sp, #16]
	WORD $0xa90257f6           // stp	x22, x21, [sp, #32]
	WORD $0xf100015f           // cmp	x10, #0
	WORD $0xa9034ff4           // stp	x20, x19, [sp, #48]
	BLE  BB1_9
	WORD $0xf94023eb           // ldr	x11, [sp, #64]
	WORD $0x2f0004e0           // mvni	v0.2s, #7
	WORD $0xd37ef54d           // lsl	x13, x10, #2
	WORD $0xaa1f03ee           // mov	x14, xzr
	WORD $0xf940016c           // ldr	x12, [x11]
	WORD $0xf94000eb           // ldr	x11, [x7]
	WORD $0xd37ef58c           // lsl	x12, x12, #2

BB1_4:
	WORD $0x9b097dd0 // mul	x16, x14, x9
	WORD $0xaa1f03ef // mov	x15, xzr
	WORD $0x52800051 // mov	w17, #2
	WORD $0x8b100870 // add	x16, x3, x16, lsl #2

BB1_5:
	WORD $0xb24001e5 // orr	x5, x15, #0x1
	WORD $0xb27f01e6 // orr	x6, x15, #0x2
	WORD $0xb24005e7 // orr	x7, x15, #0x3
	WORD $0x9acb0de4 // sdiv	x4, x15, x11
	WORD $0x6f00e401 // movi	v1.2d, #0000000000000000
	WORD $0xaa0003f3 // mov	x19, x0
	WORD $0xaa1103f4 // mov	x20, x17
	WORD $0xaa0203f5 // mov	x21, x2
	WORD $0xaa0a03f6 // mov	x22, x10
	WORD $0x9acb0ca5 // sdiv	x5, x5, x11
	WORD $0x9acb0cc6 // sdiv	x6, x6, x11
	WORD $0x9acb0ce7 // sdiv	x7, x7, x11

BB1_6:
	WORD $0x8b54fe97 // add	x23, x20, x20, lsr #63
	WORD $0xd1000a98 // sub	x24, x20, #2
	WORD $0xbc647aa5 // ldr	s5, [x21, x4, lsl #2]
	WORD $0xd341ff18 // lsr	x24, x24, #1
	WORD $0xbc657aa6 // ldr	s6, [x21, x5, lsl #2]
	WORD $0xbc667aa7 // ldr	s7, [x21, x6, lsl #2]
	WORD $0x9341fef7 // asr	x23, x23, #1
	WORD $0xf10006d6 // subs	x22, x22, #1
	WORD $0x8b090294 // add	x20, x20, x9
	WORD $0x38786838 // ldrb	w24, [x1, x24]
	WORD $0x38776837 // ldrb	w23, [x1, x23]
	WORD $0x12000ef9 // and	w25, w23, #0xf
	WORD $0x53047ef7 // lsr	w23, w23, #4
	WORD $0x1e270322 // fmov	s2, w25
	WORD $0x53047f19 // lsr	w25, w24, #4
	WORD $0x4e0c1ee2 // mov	v2.s[1], w23
	WORD $0x12000f17 // and	w23, w24, #0xf
	WORD $0x51002338 // sub	w24, w25, #8
	WORD $0x510022f7 // sub	w23, w23, #8
	WORD $0x1e220304 // scvtf	s4, w24
	WORD $0x1e2202e3 // scvtf	s3, w23
	WORD $0x8b070ab7 // add	x23, x21, x7, lsl #2
	WORD $0x8b0c02b5 // add	x21, x21, x12
	WORD $0x0ea08442 // add	v2.2s, v2.2s, v0.2s
	WORD $0x0d4092e7 // ld1	{ v7.s }[1], [x23]
	WORD $0x1e2408c4 // fmul	s4, s6, s4
	WORD $0x1e2308a3 // fmul	s3, s5, s3
	WORD $0x0e21d842 // scvtf	v2.2s, v2.2s
	WORD $0x6e0c0483 // mov	v3.s[1], v4.s[0]
	WORD $0x2e22dce2 // fmul	v2.2s, v7.2s, v2.2s
	WORD $0x6e180443 // mov	v3.d[1], v2.d[0]
	WORD $0xbc404662 // ldr	s2, [x19], #4
	WORD $0x4f821061 // fmla	v1.4s, v3.4s, v2.s[0]
	BNE  BB1_6
	WORD $0xd37ef5e4 // lsl	x4, x15, #2
	WORD $0x910011ef // add	x15, x15, #4
	WORD $0x91001231 // add	x17, x17, #4
	WORD $0xeb0901ff // cmp	x15, x9
	WORD $0x3ca46a01 // str	q1, [x16, x4]
	BLT  BB1_5
	WORD $0x910005ce // add	x14, x14, #1
	WORD $0x8b0d0000 // add	x0, x0, x13
	WORD $0xeb0801df // cmp	x14, x8
	BNE  BB1_4
	B    BB1_13

BB1_9:
	WORD $0xd37ef52a // lsl	x10, x9, #2
	WORD $0xaa1f03eb // mov	x11, xzr

BB1_10:
	WORD $0xaa1f03ec // mov	x12, xzr
	WORD $0xaa0303ed // mov	x13, x3

BB1_11:
	WORD $0x9100118c // add	x12, x12, #4
	WORD $0xa8817dbf // stp	xzr, xzr, [x13], #16
	WORD $0xeb09019f // cmp	x12, x9
	BLT  BB1_11
	WORD $0x9100056b // add	x11, x11, #1
	WORD $0x8b0a0063 // add	x3, x3, x10
	WORD $0xeb08017f // cmp	x11, x8
	BNE  BB1_10

BB1_13:
	WORD $0xa9434ff4 // ldp	x20, x19, [sp, #48]
	WORD $0xa94257f6 // ldp	x22, x21, [sp, #32]
	WORD $0xa9415ff8 // ldp	x24, x23, [sp, #16]
	WORD $0xf94007f9 // ldr	x25, [sp], #64 [transformed]

BB1_14:
	RET
