// Code generated by github.com/ajroetker/go-highway/cmd/hwygen. DO NOT EDIT.

//go:build amd64 && goexperiment.simd

package algo

import (
	"github.com/ajroetker/go-highway/hwy"
	"simd/archsimd"
	"unsafe"
)

func BasePrefixSum_avx512(data []float32) {
	n := len(data)
	if n == 0 {
		return
	}
	lanes := 16
	carry := float32(0)
	i := 0
	for ; i+lanes*3 <= n; i += lanes * 3 {
		v := archsimd.LoadFloat32x16((*[16]float32)(unsafe.Pointer(&data[i])))
		prefixed := BasePrefixSumVec_avx512(v)
		prefixed = prefixed.Add(archsimd.BroadcastFloat32x16(carry))
		prefixed.Store((*[16]float32)(unsafe.Pointer(&data[i])))
		carry = hwy.GetLane_AVX512_F32x16(prefixed, lanes-1)
		v1 := archsimd.LoadFloat32x16((*[16]float32)(unsafe.Pointer(&data[i+16])))
		prefixed1 := BasePrefixSumVec_avx512(v1)
		prefixed1 = prefixed1.Add(archsimd.BroadcastFloat32x16(carry))
		prefixed1.Store((*[16]float32)(unsafe.Pointer(&data[i+16])))
		carry = hwy.GetLane_AVX512_F32x16(prefixed1, lanes-1)
		v2 := archsimd.LoadFloat32x16((*[16]float32)(unsafe.Pointer(&data[i+32])))
		prefixed2 := BasePrefixSumVec_avx512(v2)
		prefixed2 = prefixed2.Add(archsimd.BroadcastFloat32x16(carry))
		prefixed2.Store((*[16]float32)(unsafe.Pointer(&data[i+32])))
		carry = hwy.GetLane_AVX512_F32x16(prefixed2, lanes-1)
	}
	for ; i < n; i++ {
		carry += data[i]
		data[i] = carry
	}
}

func BasePrefixSum_avx512_Float64(data []float64) {
	n := len(data)
	if n == 0 {
		return
	}
	lanes := 8
	carry := float64(0)
	i := 0
	for ; i+lanes*3 <= n; i += lanes * 3 {
		v := archsimd.LoadFloat64x8((*[8]float64)(unsafe.Pointer(&data[i])))
		prefixed := BasePrefixSumVec_avx512_Float64(v)
		prefixed = prefixed.Add(archsimd.BroadcastFloat64x8(carry))
		prefixed.Store((*[8]float64)(unsafe.Pointer(&data[i])))
		carry = hwy.GetLane_AVX512_F64x8(prefixed, lanes-1)
		v1 := archsimd.LoadFloat64x8((*[8]float64)(unsafe.Pointer(&data[i+8])))
		prefixed1 := BasePrefixSumVec_avx512_Float64(v1)
		prefixed1 = prefixed1.Add(archsimd.BroadcastFloat64x8(carry))
		prefixed1.Store((*[8]float64)(unsafe.Pointer(&data[i+8])))
		carry = hwy.GetLane_AVX512_F64x8(prefixed1, lanes-1)
		v2 := archsimd.LoadFloat64x8((*[8]float64)(unsafe.Pointer(&data[i+16])))
		prefixed2 := BasePrefixSumVec_avx512_Float64(v2)
		prefixed2 = prefixed2.Add(archsimd.BroadcastFloat64x8(carry))
		prefixed2.Store((*[8]float64)(unsafe.Pointer(&data[i+16])))
		carry = hwy.GetLane_AVX512_F64x8(prefixed2, lanes-1)
	}
	for ; i < n; i++ {
		carry += data[i]
		data[i] = carry
	}
}

func BasePrefixSum_avx512_Int32(data []int32) {
	n := len(data)
	if n == 0 {
		return
	}
	lanes := 16
	carry := int32(0)
	i := 0
	for ; i+lanes*3 <= n; i += lanes * 3 {
		v := archsimd.LoadInt32x16((*[16]int32)(unsafe.Pointer(&data[i])))
		prefixed := BasePrefixSumVec_avx512_Int32(v)
		prefixed = prefixed.Add(archsimd.BroadcastInt32x16(carry))
		prefixed.Store((*[16]int32)(unsafe.Pointer(&data[i])))
		carry = hwy.GetLane_AVX512_I32x16(prefixed, lanes-1)
		v1 := archsimd.LoadInt32x16((*[16]int32)(unsafe.Pointer(&data[i+16])))
		prefixed1 := BasePrefixSumVec_avx512_Int32(v1)
		prefixed1 = prefixed1.Add(archsimd.BroadcastInt32x16(carry))
		prefixed1.Store((*[16]int32)(unsafe.Pointer(&data[i+16])))
		carry = hwy.GetLane_AVX512_I32x16(prefixed1, lanes-1)
		v2 := archsimd.LoadInt32x16((*[16]int32)(unsafe.Pointer(&data[i+32])))
		prefixed2 := BasePrefixSumVec_avx512_Int32(v2)
		prefixed2 = prefixed2.Add(archsimd.BroadcastInt32x16(carry))
		prefixed2.Store((*[16]int32)(unsafe.Pointer(&data[i+32])))
		carry = hwy.GetLane_AVX512_I32x16(prefixed2, lanes-1)
	}
	for ; i < n; i++ {
		carry += data[i]
		data[i] = carry
	}
}

func BasePrefixSum_avx512_Int64(data []int64) {
	n := len(data)
	if n == 0 {
		return
	}
	lanes := 8
	carry := int64(0)
	i := 0
	for ; i+lanes*3 <= n; i += lanes * 3 {
		v := archsimd.LoadInt64x8((*[8]int64)(unsafe.Pointer(&data[i])))
		prefixed := BasePrefixSumVec_avx512_Int64(v)
		prefixed = prefixed.Add(archsimd.BroadcastInt64x8(carry))
		prefixed.Store((*[8]int64)(unsafe.Pointer(&data[i])))
		carry = hwy.GetLane_AVX512_I64x8(prefixed, lanes-1)
		v1 := archsimd.LoadInt64x8((*[8]int64)(unsafe.Pointer(&data[i+8])))
		prefixed1 := BasePrefixSumVec_avx512_Int64(v1)
		prefixed1 = prefixed1.Add(archsimd.BroadcastInt64x8(carry))
		prefixed1.Store((*[8]int64)(unsafe.Pointer(&data[i+8])))
		carry = hwy.GetLane_AVX512_I64x8(prefixed1, lanes-1)
		v2 := archsimd.LoadInt64x8((*[8]int64)(unsafe.Pointer(&data[i+16])))
		prefixed2 := BasePrefixSumVec_avx512_Int64(v2)
		prefixed2 = prefixed2.Add(archsimd.BroadcastInt64x8(carry))
		prefixed2.Store((*[8]int64)(unsafe.Pointer(&data[i+16])))
		carry = hwy.GetLane_AVX512_I64x8(prefixed2, lanes-1)
	}
	for ; i < n; i++ {
		carry += data[i]
		data[i] = carry
	}
}

func BasePrefixSum_avx512_Uint32(data []uint32) {
	n := len(data)
	if n == 0 {
		return
	}
	lanes := 16
	carry := uint32(0)
	i := 0
	for ; i+lanes*3 <= n; i += lanes * 3 {
		v := archsimd.LoadUint32x16((*[16]uint32)(unsafe.Pointer(&data[i])))
		prefixed := BasePrefixSumVec_avx512_Uint32(v)
		prefixed = prefixed.Add(archsimd.BroadcastUint32x16(carry))
		prefixed.Store((*[16]uint32)(unsafe.Pointer(&data[i])))
		carry = hwy.GetLane_AVX512_Uint32x16(prefixed, lanes-1)
		v1 := archsimd.LoadUint32x16((*[16]uint32)(unsafe.Pointer(&data[i+16])))
		prefixed1 := BasePrefixSumVec_avx512_Uint32(v1)
		prefixed1 = prefixed1.Add(archsimd.BroadcastUint32x16(carry))
		prefixed1.Store((*[16]uint32)(unsafe.Pointer(&data[i+16])))
		carry = hwy.GetLane_AVX512_Uint32x16(prefixed1, lanes-1)
		v2 := archsimd.LoadUint32x16((*[16]uint32)(unsafe.Pointer(&data[i+32])))
		prefixed2 := BasePrefixSumVec_avx512_Uint32(v2)
		prefixed2 = prefixed2.Add(archsimd.BroadcastUint32x16(carry))
		prefixed2.Store((*[16]uint32)(unsafe.Pointer(&data[i+32])))
		carry = hwy.GetLane_AVX512_Uint32x16(prefixed2, lanes-1)
	}
	for ; i < n; i++ {
		carry += data[i]
		data[i] = carry
	}
}

func BasePrefixSum_avx512_Uint64(data []uint64) {
	n := len(data)
	if n == 0 {
		return
	}
	lanes := 8
	carry := uint64(0)
	i := 0
	for ; i+lanes*3 <= n; i += lanes * 3 {
		v := archsimd.LoadUint64x8((*[8]uint64)(unsafe.Pointer(&data[i])))
		prefixed := BasePrefixSumVec_avx512_Uint64(v)
		prefixed = prefixed.Add(archsimd.BroadcastUint64x8(carry))
		prefixed.Store((*[8]uint64)(unsafe.Pointer(&data[i])))
		carry = hwy.GetLane_AVX512_Uint64x8(prefixed, lanes-1)
		v1 := archsimd.LoadUint64x8((*[8]uint64)(unsafe.Pointer(&data[i+8])))
		prefixed1 := BasePrefixSumVec_avx512_Uint64(v1)
		prefixed1 = prefixed1.Add(archsimd.BroadcastUint64x8(carry))
		prefixed1.Store((*[8]uint64)(unsafe.Pointer(&data[i+8])))
		carry = hwy.GetLane_AVX512_Uint64x8(prefixed1, lanes-1)
		v2 := archsimd.LoadUint64x8((*[8]uint64)(unsafe.Pointer(&data[i+16])))
		prefixed2 := BasePrefixSumVec_avx512_Uint64(v2)
		prefixed2 = prefixed2.Add(archsimd.BroadcastUint64x8(carry))
		prefixed2.Store((*[8]uint64)(unsafe.Pointer(&data[i+16])))
		carry = hwy.GetLane_AVX512_Uint64x8(prefixed2, lanes-1)
	}
	for ; i < n; i++ {
		carry += data[i]
		data[i] = carry
	}
}

func BaseDeltaDecode_avx512_Int32(data []int32, base int32) {
	n := len(data)
	if n == 0 {
		return
	}
	lanes := 16
	carry := base
	i := 0
	for ; i+lanes*3 <= n; i += lanes * 3 {
		v := archsimd.LoadInt32x16((*[16]int32)(unsafe.Pointer(&data[i])))
		prefixed := BasePrefixSumVec_avx512_Int32(v)
		prefixed = prefixed.Add(archsimd.BroadcastInt32x16(carry))
		prefixed.Store((*[16]int32)(unsafe.Pointer(&data[i])))
		carry = hwy.GetLane_AVX512_I32x16(prefixed, lanes-1)
		v1 := archsimd.LoadInt32x16((*[16]int32)(unsafe.Pointer(&data[i+16])))
		prefixed1 := BasePrefixSumVec_avx512_Int32(v1)
		prefixed1 = prefixed1.Add(archsimd.BroadcastInt32x16(carry))
		prefixed1.Store((*[16]int32)(unsafe.Pointer(&data[i+16])))
		carry = hwy.GetLane_AVX512_I32x16(prefixed1, lanes-1)
		v2 := archsimd.LoadInt32x16((*[16]int32)(unsafe.Pointer(&data[i+32])))
		prefixed2 := BasePrefixSumVec_avx512_Int32(v2)
		prefixed2 = prefixed2.Add(archsimd.BroadcastInt32x16(carry))
		prefixed2.Store((*[16]int32)(unsafe.Pointer(&data[i+32])))
		carry = hwy.GetLane_AVX512_I32x16(prefixed2, lanes-1)
	}
	for ; i < n; i++ {
		carry += data[i]
		data[i] = carry
	}
}

func BaseDeltaDecode_avx512_Int64(data []int64, base int64) {
	n := len(data)
	if n == 0 {
		return
	}
	lanes := 8
	carry := base
	i := 0
	for ; i+lanes*3 <= n; i += lanes * 3 {
		v := archsimd.LoadInt64x8((*[8]int64)(unsafe.Pointer(&data[i])))
		prefixed := BasePrefixSumVec_avx512_Int64(v)
		prefixed = prefixed.Add(archsimd.BroadcastInt64x8(carry))
		prefixed.Store((*[8]int64)(unsafe.Pointer(&data[i])))
		carry = hwy.GetLane_AVX512_I64x8(prefixed, lanes-1)
		v1 := archsimd.LoadInt64x8((*[8]int64)(unsafe.Pointer(&data[i+8])))
		prefixed1 := BasePrefixSumVec_avx512_Int64(v1)
		prefixed1 = prefixed1.Add(archsimd.BroadcastInt64x8(carry))
		prefixed1.Store((*[8]int64)(unsafe.Pointer(&data[i+8])))
		carry = hwy.GetLane_AVX512_I64x8(prefixed1, lanes-1)
		v2 := archsimd.LoadInt64x8((*[8]int64)(unsafe.Pointer(&data[i+16])))
		prefixed2 := BasePrefixSumVec_avx512_Int64(v2)
		prefixed2 = prefixed2.Add(archsimd.BroadcastInt64x8(carry))
		prefixed2.Store((*[8]int64)(unsafe.Pointer(&data[i+16])))
		carry = hwy.GetLane_AVX512_I64x8(prefixed2, lanes-1)
	}
	for ; i < n; i++ {
		carry += data[i]
		data[i] = carry
	}
}

func BaseDeltaDecode_avx512_Uint32(data []uint32, base uint32) {
	n := len(data)
	if n == 0 {
		return
	}
	lanes := 16
	carry := base
	i := 0
	for ; i+lanes*3 <= n; i += lanes * 3 {
		v := archsimd.LoadUint32x16((*[16]uint32)(unsafe.Pointer(&data[i])))
		prefixed := BasePrefixSumVec_avx512_Uint32(v)
		prefixed = prefixed.Add(archsimd.BroadcastUint32x16(carry))
		prefixed.Store((*[16]uint32)(unsafe.Pointer(&data[i])))
		carry = hwy.GetLane_AVX512_Uint32x16(prefixed, lanes-1)
		v1 := archsimd.LoadUint32x16((*[16]uint32)(unsafe.Pointer(&data[i+16])))
		prefixed1 := BasePrefixSumVec_avx512_Uint32(v1)
		prefixed1 = prefixed1.Add(archsimd.BroadcastUint32x16(carry))
		prefixed1.Store((*[16]uint32)(unsafe.Pointer(&data[i+16])))
		carry = hwy.GetLane_AVX512_Uint32x16(prefixed1, lanes-1)
		v2 := archsimd.LoadUint32x16((*[16]uint32)(unsafe.Pointer(&data[i+32])))
		prefixed2 := BasePrefixSumVec_avx512_Uint32(v2)
		prefixed2 = prefixed2.Add(archsimd.BroadcastUint32x16(carry))
		prefixed2.Store((*[16]uint32)(unsafe.Pointer(&data[i+32])))
		carry = hwy.GetLane_AVX512_Uint32x16(prefixed2, lanes-1)
	}
	for ; i < n; i++ {
		carry += data[i]
		data[i] = carry
	}
}

func BaseDeltaDecode_avx512_Uint64(data []uint64, base uint64) {
	n := len(data)
	if n == 0 {
		return
	}
	lanes := 8
	carry := base
	i := 0
	for ; i+lanes*3 <= n; i += lanes * 3 {
		v := archsimd.LoadUint64x8((*[8]uint64)(unsafe.Pointer(&data[i])))
		prefixed := BasePrefixSumVec_avx512_Uint64(v)
		prefixed = prefixed.Add(archsimd.BroadcastUint64x8(carry))
		prefixed.Store((*[8]uint64)(unsafe.Pointer(&data[i])))
		carry = hwy.GetLane_AVX512_Uint64x8(prefixed, lanes-1)
		v1 := archsimd.LoadUint64x8((*[8]uint64)(unsafe.Pointer(&data[i+8])))
		prefixed1 := BasePrefixSumVec_avx512_Uint64(v1)
		prefixed1 = prefixed1.Add(archsimd.BroadcastUint64x8(carry))
		prefixed1.Store((*[8]uint64)(unsafe.Pointer(&data[i+8])))
		carry = hwy.GetLane_AVX512_Uint64x8(prefixed1, lanes-1)
		v2 := archsimd.LoadUint64x8((*[8]uint64)(unsafe.Pointer(&data[i+16])))
		prefixed2 := BasePrefixSumVec_avx512_Uint64(v2)
		prefixed2 = prefixed2.Add(archsimd.BroadcastUint64x8(carry))
		prefixed2.Store((*[8]uint64)(unsafe.Pointer(&data[i+16])))
		carry = hwy.GetLane_AVX512_Uint64x8(prefixed2, lanes-1)
	}
	for ; i < n; i++ {
		carry += data[i]
		data[i] = carry
	}
}

func BasePrefixSumVec_avx512(v archsimd.Float32x16) archsimd.Float32x16 {
	n := 16
	if n >= 2 {
		v = v.Add(hwy.SlideUpLanes_AVX512_F32x16(v, 1))
	}
	if n >= 4 {
		v = v.Add(hwy.SlideUpLanes_AVX512_F32x16(v, 2))
	}
	if n >= 8 {
		v = v.Add(hwy.SlideUpLanes_AVX512_F32x16(v, 4))
	}
	if n >= 16 {
		v = v.Add(hwy.SlideUpLanes_AVX512_F32x16(v, 8))
	}
	return v
}

func BasePrefixSumVec_avx512_Float64(v archsimd.Float64x8) archsimd.Float64x8 {
	n := 8
	if n >= 2 {
		v = v.Add(hwy.SlideUpLanes_AVX512_F64x8(v, 1))
	}
	if n >= 4 {
		v = v.Add(hwy.SlideUpLanes_AVX512_F64x8(v, 2))
	}
	if n >= 8 {
		v = v.Add(hwy.SlideUpLanes_AVX512_F64x8(v, 4))
	}
	if n >= 16 {
		v = v.Add(hwy.SlideUpLanes_AVX512_F64x8(v, 8))
	}
	return v
}

func BasePrefixSumVec_avx512_Int32(v archsimd.Int32x16) archsimd.Int32x16 {
	n := 16
	if n >= 2 {
		v = v.Add(hwy.SlideUpLanes_AVX512_I32x16(v, 1))
	}
	if n >= 4 {
		v = v.Add(hwy.SlideUpLanes_AVX512_I32x16(v, 2))
	}
	if n >= 8 {
		v = v.Add(hwy.SlideUpLanes_AVX512_I32x16(v, 4))
	}
	if n >= 16 {
		v = v.Add(hwy.SlideUpLanes_AVX512_I32x16(v, 8))
	}
	return v
}

func BasePrefixSumVec_avx512_Int64(v archsimd.Int64x8) archsimd.Int64x8 {
	n := 8
	if n >= 2 {
		v = v.Add(hwy.SlideUpLanes_AVX512_I64x8(v, 1))
	}
	if n >= 4 {
		v = v.Add(hwy.SlideUpLanes_AVX512_I64x8(v, 2))
	}
	if n >= 8 {
		v = v.Add(hwy.SlideUpLanes_AVX512_I64x8(v, 4))
	}
	if n >= 16 {
		v = v.Add(hwy.SlideUpLanes_AVX512_I64x8(v, 8))
	}
	return v
}

func BasePrefixSumVec_avx512_Uint32(v archsimd.Uint32x16) archsimd.Uint32x16 {
	n := 16
	if n >= 2 {
		v = v.Add(hwy.SlideUpLanes_AVX512_Uint32x16(v, 1))
	}
	if n >= 4 {
		v = v.Add(hwy.SlideUpLanes_AVX512_Uint32x16(v, 2))
	}
	if n >= 8 {
		v = v.Add(hwy.SlideUpLanes_AVX512_Uint32x16(v, 4))
	}
	if n >= 16 {
		v = v.Add(hwy.SlideUpLanes_AVX512_Uint32x16(v, 8))
	}
	return v
}

func BasePrefixSumVec_avx512_Uint64(v archsimd.Uint64x8) archsimd.Uint64x8 {
	n := 8
	if n >= 2 {
		v = v.Add(hwy.SlideUpLanes_AVX512_Uint64x8(v, 1))
	}
	if n >= 4 {
		v = v.Add(hwy.SlideUpLanes_AVX512_Uint64x8(v, 2))
	}
	if n >= 8 {
		v = v.Add(hwy.SlideUpLanes_AVX512_Uint64x8(v, 4))
	}
	if n >= 16 {
		v = v.Add(hwy.SlideUpLanes_AVX512_Uint64x8(v, 8))
	}
	return v
}
