// Code generated by github.com/ajroetker/go-highway/cmd/hwygen. DO NOT EDIT.

//go:build amd64 && goexperiment.simd

package sort

import (
	"simd/archsimd"

	"github.com/ajroetker/go-highway/hwy"
)

var FloatToSortableFloat16 func(data []hwy.Float16)
var FloatToSortableBFloat16 func(data []hwy.BFloat16)
var FloatToSortableFloat32 func(data []float32)
var FloatToSortableFloat64 func(data []float64)
var SortableToFloatFloat16 func(data []hwy.Float16)
var SortableToFloatBFloat16 func(data []hwy.BFloat16)
var SortableToFloatFloat32 func(data []float32)
var SortableToFloatFloat64 func(data []float64)

// FloatToSortable transforms float values to sortable order in-place.
// Positive floats: flip sign bit. Negative floats: flip all bits.
//
// This function dispatches to the appropriate SIMD implementation at runtime.
func FloatToSortable[T hwy.Floats](data []T) {
	switch any(data).(type) {
	case []hwy.Float16:
		FloatToSortableFloat16(any(data).([]hwy.Float16))
	case []hwy.BFloat16:
		FloatToSortableBFloat16(any(data).([]hwy.BFloat16))
	case []float32:
		FloatToSortableFloat32(any(data).([]float32))
	case []float64:
		FloatToSortableFloat64(any(data).([]float64))
	}
}

// SortableToFloat transforms sortable values back to float in-place.
//
// This function dispatches to the appropriate SIMD implementation at runtime.
func SortableToFloat[T hwy.Floats](data []T) {
	switch any(data).(type) {
	case []hwy.Float16:
		SortableToFloatFloat16(any(data).([]hwy.Float16))
	case []hwy.BFloat16:
		SortableToFloatBFloat16(any(data).([]hwy.BFloat16))
	case []float32:
		SortableToFloatFloat32(any(data).([]float32))
	case []float64:
		SortableToFloatFloat64(any(data).([]float64))
	}
}

func init() {
	if hwy.NoSimdEnv() {
		initRadix_floatFallback()
		return
	}
	if archsimd.X86.AVX512() {
		initRadix_floatAVX512()
		return
	}
	if archsimd.X86.AVX2() {
		initRadix_floatAVX2()
		return
	}
	initRadix_floatFallback()
}

func initRadix_floatAVX2() {
	FloatToSortableFloat16 = BaseFloatToSortable_avx2_Float16
	FloatToSortableBFloat16 = BaseFloatToSortable_avx2_BFloat16
	FloatToSortableFloat32 = BaseFloatToSortable_avx2
	FloatToSortableFloat64 = BaseFloatToSortable_avx2_Float64
	SortableToFloatFloat16 = BaseSortableToFloat_avx2_Float16
	SortableToFloatBFloat16 = BaseSortableToFloat_avx2_BFloat16
	SortableToFloatFloat32 = BaseSortableToFloat_avx2
	SortableToFloatFloat64 = BaseSortableToFloat_avx2_Float64
}

func initRadix_floatAVX512() {
	FloatToSortableFloat16 = BaseFloatToSortable_avx512_Float16
	FloatToSortableBFloat16 = BaseFloatToSortable_avx512_BFloat16
	FloatToSortableFloat32 = BaseFloatToSortable_avx512
	FloatToSortableFloat64 = BaseFloatToSortable_avx512_Float64
	SortableToFloatFloat16 = BaseSortableToFloat_avx512_Float16
	SortableToFloatBFloat16 = BaseSortableToFloat_avx512_BFloat16
	SortableToFloatFloat32 = BaseSortableToFloat_avx512
	SortableToFloatFloat64 = BaseSortableToFloat_avx512_Float64
}

func initRadix_floatFallback() {
	FloatToSortableFloat16 = BaseFloatToSortable_fallback_Float16
	FloatToSortableBFloat16 = BaseFloatToSortable_fallback_BFloat16
	FloatToSortableFloat32 = BaseFloatToSortable_fallback
	FloatToSortableFloat64 = BaseFloatToSortable_fallback_Float64
	SortableToFloatFloat16 = BaseSortableToFloat_fallback_Float16
	SortableToFloatBFloat16 = BaseSortableToFloat_fallback_BFloat16
	SortableToFloatFloat32 = BaseSortableToFloat_fallback
	SortableToFloatFloat64 = BaseSortableToFloat_fallback_Float64
}
